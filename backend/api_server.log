2025-08-12 23:11:11,330 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-12 23:11:11,330 - __main__ - INFO - Host: 127.0.0.1, Port: 8000
2025-08-12 23:11:11,330 - __main__ - INFO - Workers: 1, Log level: debug
2025-08-12 23:11:13,596 - api.main - INFO - Initializing services...
2025-08-12 23:11:13,597 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-12 23:11:13,597 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-12 23:11:13,597 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-12 23:11:14,105 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-12 23:11:15,058 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-12 23:11:15,065 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-12 23:11:15,065 - services.document_service - INFO - DocumentService initialized successfully
2025-08-12 23:11:15,068 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-12 23:11:15,212 - services.query_service - INFO - QueryService initialized successfully
2025-08-12 23:11:15,213 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-12 23:11:15,213 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-12 23:11:15,213 - api.main - INFO - Services initialized successfully
2025-08-19 22:20:15,635 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:20:15,635 - __main__ - INFO - Host: 127.0.0.1, Port: 0
2025-08-19 22:20:15,635 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:20:17,669 - api.main - INFO - Initializing database...
2025-08-19 22:20:17,671 - api.main - INFO - Initializing services...
2025-08-19 22:20:17,740 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:20:17,804 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:20:17,938 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:20:17,938 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:20:17,939 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:20:17,939 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:20:17,941 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:20:18,292 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:20:18,300 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:20:18,301 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:20:18,308 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:20:18,345 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:20:18,348 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:20:18,349 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:20:18,349 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:20:18,349 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:20:18,349 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:20:18,349 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:20:18,349 - api.main - INFO - Services initialized successfully
2025-08-19 22:20:18,349 - api.main - INFO - Starting task workers...
2025-08-19 22:20:18,349 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:20:18,350 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:20:18,350 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:20:37,135 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:20:37,135 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-19 22:20:37,135 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:20:50,446 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:20:50,446 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-19 22:20:50,446 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:21:23,926 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:21:23,926 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-19 22:21:23,926 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:21:25,767 - api.main - INFO - Initializing database...
2025-08-19 22:21:25,770 - api.main - INFO - Initializing services...
2025-08-19 22:21:25,841 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:21:25,925 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:21:26,058 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:21:26,058 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:21:26,059 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:21:26,059 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:21:26,063 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:21:26,428 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:21:26,437 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:21:26,438 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:21:26,443 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:21:26,470 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:21:26,472 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:21:26,472 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:21:26,472 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:21:26,472 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:21:26,472 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:21:26,472 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:21:26,472 - api.main - INFO - Services initialized successfully
2025-08-19 22:21:26,473 - api.main - INFO - Starting task workers...
2025-08-19 22:21:26,473 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:21:26,473 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:21:26,473 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:23:54,128 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:23:54,323 - api.main - INFO - Shutting down services...
2025-08-19 22:23:54,324 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:23:54,325 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:23:54,326 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:23:54,326 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:23:54,326 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:23:54,327 - services.task_service - INFO - Task workers stopped
2025-08-19 22:23:54,327 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:23:54,328 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:23:54,329 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:23:54,329 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:23:54,330 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:23:54,330 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:23:54,330 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:23:54,330 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:23:54,331 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:23:54,331 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:23:54,331 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:23:54,332 - api.main - INFO - Services shutdown complete
2025-08-19 22:23:54,764 - watchfiles.main - INFO - 4 changes detected
2025-08-19 22:23:56,992 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:23:57,566 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:23:58,248 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:23:58,775 - api.main - INFO - Initializing database...
2025-08-19 22:23:58,777 - api.main - INFO - Initializing services...
2025-08-19 22:23:58,848 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:23:58,933 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:23:59,043 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:23:59,043 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:23:59,043 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:23:59,043 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:23:59,046 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:23:59,394 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:23:59,397 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:23:59,398 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:23:59,402 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:23:59,433 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:23:59,436 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:23:59,436 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:23:59,436 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:23:59,436 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:23:59,437 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:23:59,437 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:23:59,437 - api.main - INFO - Services initialized successfully
2025-08-19 22:23:59,437 - api.main - INFO - Starting task workers...
2025-08-19 22:23:59,437 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:23:59,437 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:23:59,437 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:24:03,425 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:24:03,581 - api.main - INFO - Shutting down services...
2025-08-19 22:24:03,581 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:24:03,581 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:24:03,581 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:24:03,581 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:24:03,582 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:24:03,582 - services.task_service - INFO - Task workers stopped
2025-08-19 22:24:03,582 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:24:03,582 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:24:03,582 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:03,582 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:24:03,582 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:03,582 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:24:03,583 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:03,583 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:24:03,583 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:03,583 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:24:03,583 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:24:03,583 - api.main - INFO - Services shutdown complete
2025-08-19 22:24:03,954 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:24:05,872 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:24:06,394 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:24:07,024 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:24:07,750 - api.main - INFO - Initializing database...
2025-08-19 22:24:07,753 - api.main - INFO - Initializing services...
2025-08-19 22:24:07,818 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:08,018 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:24:08,018 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:24:08,018 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:24:08,018 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:24:08,021 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:08,347 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:24:08,352 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:24:08,352 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:24:08,357 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:08,396 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:24:08,400 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:08,400 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:24:08,400 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:24:08,401 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:24:08,401 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:24:08,401 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:24:08,401 - api.main - INFO - Services initialized successfully
2025-08-19 22:24:08,402 - api.main - INFO - Starting task workers...
2025-08-19 22:24:08,402 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:24:08,403 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:24:08,403 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:24:08,803 - watchfiles.main - INFO - 8 changes detected
2025-08-19 22:24:10,279 - api.main - INFO - Initializing database...
2025-08-19 22:24:10,282 - api.main - INFO - Initializing services...
2025-08-19 22:24:10,350 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:10,452 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:24:10,551 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:24:10,551 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:24:10,551 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:24:10,551 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:24:10,554 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:10,885 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:24:10,888 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:24:10,888 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:24:10,892 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:10,916 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:24:10,919 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:10,919 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:24:10,919 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:24:10,919 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:24:10,919 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:24:10,919 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:24:10,919 - api.main - INFO - Services initialized successfully
2025-08-19 22:24:10,920 - api.main - INFO - Starting task workers...
2025-08-19 22:24:10,920 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:24:10,920 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:24:10,920 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:24:11,285 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:24:12,135 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:24:12,674 - api.main - INFO - Initializing database...
2025-08-19 22:24:12,677 - api.main - INFO - Initializing services...
2025-08-19 22:24:12,737 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:12,815 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:24:12,905 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:24:12,906 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:24:12,906 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:24:12,906 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:24:12,908 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:13,255 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:24:13,258 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:24:13,259 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:24:13,262 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:13,286 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:24:13,288 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:13,288 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:24:13,288 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:24:13,289 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:24:13,289 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:24:13,289 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:24:13,289 - api.main - INFO - Services initialized successfully
2025-08-19 22:24:13,289 - api.main - INFO - Starting task workers...
2025-08-19 22:24:13,289 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:24:13,289 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:24:13,289 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:24:16,009 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:24:16,121 - api.main - INFO - Shutting down services...
2025-08-19 22:24:16,121 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:24:16,121 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:24:16,121 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:24:16,121 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:24:16,122 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:24:16,122 - services.task_service - INFO - Task workers stopped
2025-08-19 22:24:16,122 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:24:16,122 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:24:16,122 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:16,122 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:24:16,122 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:16,122 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:24:16,122 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:16,123 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:24:16,123 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:24:16,123 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:24:16,123 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:24:16,123 - api.main - INFO - Services shutdown complete
2025-08-19 22:24:16,544 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:24:17,336 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:24:17,852 - api.main - INFO - Initializing database...
2025-08-19 22:24:17,855 - api.main - INFO - Initializing services...
2025-08-19 22:24:17,917 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:18,020 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:24:18,086 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:24:18,087 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:24:18,087 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:24:18,087 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:24:18,089 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:18,453 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:24:18,456 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:24:18,456 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:24:18,459 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:18,486 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:24:18,488 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:24:18,488 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:24:18,488 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:24:18,489 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:24:18,489 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:24:18,489 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:24:18,489 - api.main - INFO - Services initialized successfully
2025-08-19 22:24:18,489 - api.main - INFO - Starting task workers...
2025-08-19 22:24:18,489 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:24:18,489 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:24:18,489 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:25:21,398 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:25:21,532 - api.main - INFO - Shutting down services...
2025-08-19 22:25:21,532 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:25:21,533 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:25:21,533 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:25:21,533 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:25:21,533 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:25:21,534 - services.task_service - INFO - Task workers stopped
2025-08-19 22:25:21,534 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:25:21,534 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:25:21,534 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:25:21,534 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:25:21,534 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:25:21,534 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:25:21,535 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:25:21,535 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:25:21,535 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:25:21,535 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:25:21,535 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:25:21,535 - api.main - INFO - Services shutdown complete
2025-08-19 22:25:21,909 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:25:22,272 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:25:23,381 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:25:23,914 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:25:26,097 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:25:26,682 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:25:27,045 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:25:27,909 - api.main - INFO - Initializing database...
2025-08-19 22:25:27,912 - api.main - INFO - Initializing services...
2025-08-19 22:25:27,977 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:28,171 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:25:28,172 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:25:28,172 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:25:28,172 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:25:28,174 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:28,525 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:25:28,530 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:25:28,531 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:25:28,537 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:28,576 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:25:28,579 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:28,579 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:25:28,579 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:25:28,579 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:25:28,579 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:25:28,579 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:25:28,579 - api.main - INFO - Services initialized successfully
2025-08-19 22:25:28,579 - api.main - INFO - Starting task workers...
2025-08-19 22:25:28,579 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:25:28,579 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:25:28,580 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:25:28,950 - watchfiles.main - INFO - 8 changes detected
2025-08-19 22:25:30,377 - api.main - INFO - Initializing database...
2025-08-19 22:25:30,379 - api.main - INFO - Initializing services...
2025-08-19 22:25:30,440 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:30,512 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:25:30,609 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:25:30,609 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:25:30,609 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:25:30,609 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:25:30,612 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:30,944 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:25:30,953 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:25:30,954 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:25:30,960 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:30,984 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:25:30,987 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:25:30,987 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:25:30,987 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:25:30,987 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:25:30,987 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:25:30,987 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:25:30,987 - api.main - INFO - Services initialized successfully
2025-08-19 22:25:30,987 - api.main - INFO - Starting task workers...
2025-08-19 22:25:30,987 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:25:30,988 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:25:30,988 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:34:20,692 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:34:20,692 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-19 22:34:20,692 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:34:22,558 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:34:22,726 - api.main - INFO - Initializing database...
2025-08-19 22:34:22,728 - api.main - INFO - Initializing services...
2025-08-19 22:34:22,847 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:34:22,921 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:34:23,149 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:34:23,150 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:34:23,150 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:34:23,150 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:34:23,152 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:34:24,332 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:34:24,341 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:34:24,342 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:34:24,355 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:34:24,432 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:34:24,435 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:34:24,435 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:34:24,435 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:34:24,435 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:34:24,435 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:34:24,435 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:34:24,435 - api.main - INFO - Services initialized successfully
2025-08-19 22:34:24,435 - api.main - INFO - Starting task workers...
2025-08-19 22:34:24,435 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:34:24,435 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:34:24,436 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:34:29,462 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:34:29,512 - services.collection_service - WARNING - Collection with id 'wechat_miniapp' already exists
2025-08-19 22:34:29,513 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'wechat_miniapp' already exists
2025-08-19 22:34:39,237 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:34:39,279 - api.routes.collections - ERROR - Failed to create collection: Collection [wechat_miniapdp] does not exists
2025-08-19 22:36:51,587 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:36:51,604 - services.collection_service - WARNING - Collection with id 'wechat_miniapdp' already exists
2025-08-19 22:36:51,606 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'wechat_miniapdp' already exists
2025-08-19 22:37:17,774 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:37:17,912 - api.main - INFO - Shutting down services...
2025-08-19 22:37:17,912 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:37:17,913 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:37:17,913 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:37:17,914 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:37:17,914 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:37:17,915 - services.task_service - INFO - Task workers stopped
2025-08-19 22:37:17,915 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:37:17,915 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:37:17,916 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:37:17,916 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:37:17,916 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:37:17,916 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:37:17,917 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:37:17,917 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:37:17,917 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:37:17,917 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:37:17,917 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:37:17,918 - api.main - INFO - Services shutdown complete
2025-08-19 22:37:18,298 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:37:18,662 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:37:19,781 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:37:19,896 - api.main - INFO - Initializing database...
2025-08-19 22:37:19,899 - api.main - INFO - Initializing services...
2025-08-19 22:37:19,967 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:37:20,140 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:37:20,253 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:37:20,253 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:37:20,254 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:37:20,254 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:37:20,256 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:37:21,133 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:37:21,142 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:37:21,142 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:37:21,151 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:37:21,236 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:37:21,239 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:37:21,239 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:37:21,239 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:37:21,239 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:37:21,239 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:37:21,239 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:37:21,239 - api.main - INFO - Services initialized successfully
2025-08-19 22:37:21,239 - api.main - INFO - Starting task workers...
2025-08-19 22:37:21,239 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:37:21,239 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:37:21,240 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:39:11,921 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:39:12,111 - api.main - INFO - Shutting down services...
2025-08-19 22:39:12,111 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:39:12,112 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:39:12,112 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:39:12,112 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:39:12,112 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:39:12,112 - services.task_service - INFO - Task workers stopped
2025-08-19 22:39:12,113 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:39:12,113 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:39:12,115 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:12,115 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:39:12,115 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:12,116 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:39:12,116 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:12,116 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:39:12,116 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:12,116 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:39:12,116 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:39:12,116 - api.main - INFO - Services shutdown complete
2025-08-19 22:39:12,494 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:39:12,853 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:39:14,225 - watchfiles.main - INFO - 4 changes detected
2025-08-19 22:39:14,405 - api.main - INFO - Initializing database...
2025-08-19 22:39:14,408 - api.main - INFO - Initializing services...
2025-08-19 22:39:14,488 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:14,799 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:39:14,799 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:39:14,799 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:39:14,799 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:39:14,802 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:15,769 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:39:15,779 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:39:15,779 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:39:15,789 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:15,876 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:39:15,879 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:15,879 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:39:15,879 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:39:15,879 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:39:15,879 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:39:15,880 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:39:15,880 - api.main - INFO - Services initialized successfully
2025-08-19 22:39:15,880 - api.main - INFO - Starting task workers...
2025-08-19 22:39:15,880 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:39:15,880 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:39:15,880 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:39:16,252 - watchfiles.main - INFO - 5 changes detected
2025-08-19 22:39:17,563 - api.main - INFO - Initializing database...
2025-08-19 22:39:17,565 - api.main - INFO - Initializing services...
2025-08-19 22:39:17,626 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:17,699 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:39:17,885 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:39:17,885 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:39:17,885 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:39:17,886 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:39:17,888 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:18,707 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:39:18,716 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:39:18,717 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:39:18,725 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:18,812 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:39:18,815 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:18,815 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:39:18,815 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:39:18,815 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:39:18,815 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:39:18,815 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:39:18,815 - api.main - INFO - Services initialized successfully
2025-08-19 22:39:18,815 - api.main - INFO - Starting task workers...
2025-08-19 22:39:18,815 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:39:18,816 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:39:18,816 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:39:55,947 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:39:56,088 - api.main - INFO - Shutting down services...
2025-08-19 22:39:56,088 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:39:56,088 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:39:56,089 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:39:56,089 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:39:56,089 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:39:56,089 - services.task_service - INFO - Task workers stopped
2025-08-19 22:39:56,090 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:39:56,090 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:39:56,090 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:56,090 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:39:56,090 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:56,090 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:39:56,090 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:56,090 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:39:56,091 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:39:56,091 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:39:56,091 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:39:56,091 - api.main - INFO - Services shutdown complete
2025-08-19 22:39:56,461 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:39:56,826 - watchfiles.main - INFO - 4 changes detected
2025-08-19 22:39:58,107 - api.main - INFO - Initializing database...
2025-08-19 22:39:58,109 - api.main - INFO - Initializing services...
2025-08-19 22:39:58,175 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:58,264 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:39:58,482 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:39:58,483 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:39:58,483 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:39:58,483 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:39:58,486 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:59,230 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:39:59,233 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:39:59,233 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:39:59,238 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:59,313 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:39:59,316 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:39:59,316 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:39:59,316 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:39:59,316 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:39:59,316 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:39:59,316 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:39:59,316 - api.main - INFO - Services initialized successfully
2025-08-19 22:39:59,316 - api.main - INFO - Starting task workers...
2025-08-19 22:39:59,317 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:39:59,317 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:39:59,317 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:40:00,501 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:40:00,630 - api.main - INFO - Shutting down services...
2025-08-19 22:40:00,630 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:40:00,630 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:40:00,631 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:40:00,631 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:40:00,631 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:40:00,631 - services.task_service - INFO - Task workers stopped
2025-08-19 22:40:00,632 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:40:00,632 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:40:00,632 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:00,632 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:40:00,633 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:00,633 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:40:00,633 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:00,633 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:40:00,633 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:00,633 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:40:00,633 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:40:00,633 - api.main - INFO - Services shutdown complete
2025-08-19 22:40:01,018 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:40:06,348 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:40:06,873 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:40:07,232 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:40:08,184 - api.main - INFO - Initializing database...
2025-08-19 22:40:08,186 - api.main - INFO - Initializing services...
2025-08-19 22:40:08,265 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:08,347 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:40:08,556 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:40:08,556 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:40:08,556 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:40:08,556 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:40:08,559 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:09,359 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:40:09,365 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:40:09,365 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:40:09,369 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:09,444 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:40:09,449 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:09,449 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:40:09,449 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:40:09,449 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:40:09,450 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:40:09,450 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:40:09,450 - api.main - INFO - Services initialized successfully
2025-08-19 22:40:09,450 - api.main - INFO - Starting task workers...
2025-08-19 22:40:09,450 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:40:09,450 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:40:09,451 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:40:11,022 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:40:11,181 - api.main - INFO - Shutting down services...
2025-08-19 22:40:11,181 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:40:11,182 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:40:11,182 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:40:11,183 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:40:11,183 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:40:11,183 - services.task_service - INFO - Task workers stopped
2025-08-19 22:40:11,183 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:40:11,184 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:40:11,184 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:11,184 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:40:11,185 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:11,185 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:40:11,185 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:11,186 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:40:11,186 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:40:11,186 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:40:11,186 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:40:11,187 - api.main - INFO - Services shutdown complete
2025-08-19 22:40:11,557 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:40:11,922 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:40:12,975 - api.main - INFO - Initializing database...
2025-08-19 22:40:12,977 - api.main - INFO - Initializing services...
2025-08-19 22:40:13,045 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:13,135 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:40:13,369 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:40:13,369 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:40:13,369 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:40:13,369 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:40:13,372 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:14,140 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:40:14,712 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:40:14,715 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:40:14,715 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:40:14,719 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:14,793 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:40:14,796 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:14,796 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:40:14,796 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:40:14,796 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:40:14,797 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:40:14,797 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:40:14,797 - api.main - INFO - Services initialized successfully
2025-08-19 22:40:14,797 - api.main - INFO - Starting task workers...
2025-08-19 22:40:14,797 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:40:14,797 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:40:14,797 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:40:15,167 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:40:15,524 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:40:15,880 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:40:16,645 - api.main - INFO - Initializing database...
2025-08-19 22:40:16,649 - api.main - INFO - Initializing services...
2025-08-19 22:40:16,724 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:17,011 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:40:17,012 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:40:17,012 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:40:17,012 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:40:17,015 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:17,865 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:40:17,868 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:40:17,868 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:40:17,872 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:17,948 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:40:17,951 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:17,951 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:40:17,951 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:40:17,951 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:40:17,951 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:40:17,951 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:40:17,952 - api.main - INFO - Services initialized successfully
2025-08-19 22:40:17,952 - api.main - INFO - Starting task workers...
2025-08-19 22:40:17,952 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:40:17,952 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:40:17,952 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:40:18,324 - watchfiles.main - INFO - 5 changes detected
2025-08-19 22:40:19,428 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:40:19,428 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-19 22:40:19,428 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:40:20,059 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:40:21,184 - api.main - INFO - Initializing database...
2025-08-19 22:40:21,186 - api.main - INFO - Initializing services...
2025-08-19 22:40:21,247 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:21,337 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:40:21,506 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:40:21,506 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:40:21,506 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:40:21,506 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:40:21,509 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:22,338 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:40:22,347 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:40:22,347 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:40:22,356 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:22,442 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:40:22,445 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:40:22,445 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:40:22,445 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:40:22,445 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:40:22,445 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:40:22,445 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:40:22,445 - api.main - INFO - Services initialized successfully
2025-08-19 22:40:22,446 - api.main - INFO - Starting task workers...
2025-08-19 22:40:22,446 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:40:22,446 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:40:22,446 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:40:35,739 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:40:35,800 - api.routes.collections - ERROR - Failed to create collection: Collection [wechat_miniapdpd] does not exists
2025-08-19 22:40:37,058 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:40:37,061 - services.collection_service - WARNING - Collection with id 'wechat_miniapdpd' already exists
2025-08-19 22:40:37,062 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'wechat_miniapdpd' already exists
2025-08-19 22:40:38,353 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:40:38,356 - services.collection_service - WARNING - Collection with id 'wechat_miniapdpd' already exists
2025-08-19 22:40:38,356 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'wechat_miniapdpd' already exists
2025-08-19 22:41:17,606 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:41:31,623 - api.routes.collections - ERROR - Failed to create collection: Collection [wechat_miniapdpdd] does not exists
2025-08-19 22:44:17,087 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:44:17,310 - api.main - INFO - Shutting down services...
2025-08-19 22:44:17,311 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:44:17,311 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:44:17,311 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:44:17,311 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:44:17,311 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:44:17,311 - services.task_service - INFO - Task workers stopped
2025-08-19 22:44:17,312 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:44:17,312 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:44:17,313 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:17,313 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:44:17,313 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:17,313 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:44:17,313 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:17,314 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:44:17,314 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:17,314 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:44:17,314 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:44:17,315 - api.main - INFO - Services shutdown complete
2025-08-19 22:44:17,699 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:18,061 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:44:19,127 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:19,304 - api.main - INFO - Initializing database...
2025-08-19 22:44:19,307 - api.main - INFO - Initializing services...
2025-08-19 22:44:19,379 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:19,488 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:44:19,664 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:44:19,664 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:44:19,664 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:44:19,664 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:44:19,667 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:19,952 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:44:20,581 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:44:20,586 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:44:20,586 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:44:20,591 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:20,669 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:44:20,672 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:20,672 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:44:20,672 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:44:20,672 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:44:20,672 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:44:20,672 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:44:20,672 - api.main - INFO - Services initialized successfully
2025-08-19 22:44:20,672 - api.main - INFO - Starting task workers...
2025-08-19 22:44:20,672 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:44:20,672 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:44:20,673 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:44:21,046 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:22,320 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:22,424 - api.main - INFO - Initializing database...
2025-08-19 22:44:22,426 - api.main - INFO - Initializing services...
2025-08-19 22:44:22,487 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:22,682 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:44:22,747 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:44:22,747 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:44:22,747 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:44:22,748 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:44:22,750 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:23,505 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:44:23,510 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:44:23,510 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:44:23,517 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:23,608 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:44:23,611 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:23,611 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:44:23,611 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:44:23,611 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:44:23,611 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:44:23,611 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:44:23,611 - api.main - INFO - Services initialized successfully
2025-08-19 22:44:23,611 - api.main - INFO - Starting task workers...
2025-08-19 22:44:23,611 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:44:23,612 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:44:23,612 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:44:29,835 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:44:29,983 - api.main - INFO - Shutting down services...
2025-08-19 22:44:29,983 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:44:29,984 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:44:29,985 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:44:29,985 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:44:29,985 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:44:29,986 - services.task_service - INFO - Task workers stopped
2025-08-19 22:44:29,986 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:44:29,987 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:44:29,987 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:29,988 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:44:29,988 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:29,988 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:44:29,988 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:29,989 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:44:29,989 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:29,989 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:44:29,989 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:44:29,990 - api.main - INFO - Services shutdown complete
2025-08-19 22:44:30,367 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:44:30,723 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:44:31,833 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:31,950 - api.main - INFO - Initializing database...
2025-08-19 22:44:31,953 - api.main - INFO - Initializing services...
2025-08-19 22:44:32,018 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:32,194 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:44:32,292 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:44:32,292 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:44:32,293 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:44:32,293 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:44:32,299 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:33,137 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:44:33,142 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:44:33,143 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:44:33,148 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:33,225 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:44:33,228 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:33,228 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:44:33,228 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:44:33,228 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:44:33,228 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:44:33,229 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:44:33,229 - api.main - INFO - Services initialized successfully
2025-08-19 22:44:33,229 - api.main - INFO - Starting task workers...
2025-08-19 22:44:33,229 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:44:33,229 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:44:33,229 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:44:37,328 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:44:37,473 - api.main - INFO - Shutting down services...
2025-08-19 22:44:37,473 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:44:37,474 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:44:37,474 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:44:37,474 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:44:37,474 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:44:37,474 - services.task_service - INFO - Task workers stopped
2025-08-19 22:44:37,474 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:44:37,474 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:44:37,474 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:37,475 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:44:37,475 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:37,475 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:44:37,475 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:37,475 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:44:37,475 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:44:37,475 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:44:37,475 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:44:37,475 - api.main - INFO - Services shutdown complete
2025-08-19 22:44:37,899 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:39,180 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:39,300 - api.main - INFO - Initializing database...
2025-08-19 22:44:39,303 - api.main - INFO - Initializing services...
2025-08-19 22:44:39,365 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:39,535 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:39,666 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:44:39,666 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:44:39,666 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:44:39,667 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:44:39,669 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:40,456 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:44:40,465 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:44:40,465 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:44:40,474 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:40,560 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:44:40,563 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:40,563 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:44:40,563 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:44:40,563 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:44:40,563 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:44:40,563 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:44:40,563 - api.main - INFO - Services initialized successfully
2025-08-19 22:44:40,563 - api.main - INFO - Starting task workers...
2025-08-19 22:44:40,563 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:44:40,564 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:44:40,564 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:44:40,934 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:42,271 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:44:42,365 - api.main - INFO - Initializing database...
2025-08-19 22:44:42,367 - api.main - INFO - Initializing services...
2025-08-19 22:44:42,427 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:42,630 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:44:42,693 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:44:42,694 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:44:42,694 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:44:42,694 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:44:42,697 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:43,501 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:44:43,510 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:44:43,510 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:44:43,521 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:43,610 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:44:43,612 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:44:43,612 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:44:43,612 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:44:43,612 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:44:43,612 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:44:43,612 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:44:43,613 - api.main - INFO - Services initialized successfully
2025-08-19 22:44:43,613 - api.main - INFO - Starting task workers...
2025-08-19 22:44:43,613 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:44:43,613 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:44:43,613 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:44:59,739 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:44:59,739 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-19 22:44:59,739 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:45:01,573 - api.main - INFO - Initializing database...
2025-08-19 22:45:01,575 - api.main - INFO - Initializing services...
2025-08-19 22:45:01,640 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:45:01,698 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:45:01,920 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:45:01,921 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:45:01,921 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:45:01,921 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:45:01,924 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:45:02,772 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:45:02,779 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:45:02,780 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:45:02,786 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:45:02,868 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:45:02,871 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:45:02,871 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:45:02,871 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:45:02,871 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:45:02,871 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:45:02,871 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:45:02,872 - api.main - INFO - Services initialized successfully
2025-08-19 22:45:02,872 - api.main - INFO - Starting task workers...
2025-08-19 22:45:02,872 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:45:02,872 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:45:02,872 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:45:05,679 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:45:05,738 - services.collection_service - WARNING - Collection with id 'wechat_miniapdpdd' already exists
2025-08-19 22:45:17,842 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'wechat_miniapdpdd' already exists
2025-08-19 22:45:32,060 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:45:35,384 - api.routes.collections - ERROR - Failed to create collection: Instance '<Collection at 0x13926d990>' is not persistent within this Session
2025-08-19 22:45:37,440 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:45:39,736 - api.routes.collections - ERROR - Failed to create collection: Instance '<Collection at 0x138a9fe50>' is not persistent within this Session
2025-08-19 22:45:50,007 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:45:50,028 - api.routes.collections - ERROR - Failed to create collection: Instance '<Collection at 0x138a40c90>' is not persistent within this Session
2025-08-19 22:45:52,916 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:45:52,919 - api.routes.collections - ERROR - Failed to create collection: Instance '<Collection at 0x138a40d50>' is not persistent within this Session
2025-08-19 22:47:14,184 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:47:14,328 - api.main - INFO - Shutting down services...
2025-08-19 22:47:14,329 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:47:14,329 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:47:14,329 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:47:14,329 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:47:14,329 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:47:14,330 - services.task_service - INFO - Task workers stopped
2025-08-19 22:47:14,330 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:47:14,330 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:47:14,330 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:14,330 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:47:14,330 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:14,330 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:47:14,330 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:14,330 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:47:14,330 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:14,330 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:47:14,331 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:47:14,331 - api.main - INFO - Services shutdown complete
2025-08-19 22:47:14,713 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:47:15,073 - watchfiles.main - INFO - 4 changes detected
2025-08-19 22:47:16,586 - api.main - INFO - Initializing database...
2025-08-19 22:47:16,588 - api.main - INFO - Initializing services...
2025-08-19 22:47:16,657 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:16,724 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:47:16,950 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:47:16,950 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:47:16,950 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:47:16,950 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:47:16,953 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:17,927 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:47:17,937 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:47:17,938 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:47:17,946 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:18,030 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:47:18,033 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:18,033 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:47:18,033 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:47:18,033 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:47:18,033 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:47:18,033 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:47:18,033 - api.main - INFO - Services initialized successfully
2025-08-19 22:47:18,033 - api.main - INFO - Starting task workers...
2025-08-19 22:47:18,034 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:47:18,034 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:47:18,034 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:47:18,150 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:47:18,338 - api.main - INFO - Shutting down services...
2025-08-19 22:47:18,338 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:47:18,339 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:47:18,339 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:47:18,339 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:47:18,340 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:47:18,340 - services.task_service - INFO - Task workers stopped
2025-08-19 22:47:18,340 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:47:18,341 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:47:18,341 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:18,341 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:47:18,341 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:18,342 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:47:18,342 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:18,342 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:47:18,342 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:18,342 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:47:18,342 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:47:18,343 - api.main - INFO - Services shutdown complete
2025-08-19 22:47:18,715 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:47:19,882 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:47:20,412 - watchfiles.main - INFO - 4 changes detected
2025-08-19 22:47:21,742 - api.main - INFO - Initializing database...
2025-08-19 22:47:21,744 - api.main - INFO - Initializing services...
2025-08-19 22:47:21,806 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:21,922 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:47:22,084 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:47:22,085 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:47:22,085 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:47:22,085 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:47:22,088 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:22,926 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:47:22,929 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:47:22,929 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:47:22,933 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:23,005 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:47:23,007 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:23,007 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:47:23,007 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:47:23,008 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:47:23,008 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:47:23,008 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:47:23,008 - api.main - INFO - Services initialized successfully
2025-08-19 22:47:23,008 - api.main - INFO - Starting task workers...
2025-08-19 22:47:23,008 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:47:23,008 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:47:23,009 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:47:23,626 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:47:23,819 - api.main - INFO - Shutting down services...
2025-08-19 22:47:23,819 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:47:23,820 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:47:23,820 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:47:23,820 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:47:23,820 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:47:23,821 - services.task_service - INFO - Task workers stopped
2025-08-19 22:47:23,822 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:47:23,822 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:47:23,822 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:23,822 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:47:23,823 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:23,823 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:47:23,823 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:23,823 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:47:23,823 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:47:23,823 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:47:23,823 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:47:23,823 - api.main - INFO - Services shutdown complete
2025-08-19 22:47:24,249 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:47:24,607 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:47:24,970 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:47:25,664 - api.main - INFO - Initializing database...
2025-08-19 22:47:25,667 - api.main - INFO - Initializing services...
2025-08-19 22:47:25,729 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:25,993 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:47:25,993 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:47:25,993 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:47:25,993 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:47:25,996 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:26,887 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:47:26,893 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:47:26,893 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:47:26,899 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:26,980 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:47:26,983 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:26,983 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:47:26,983 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:47:26,983 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:47:26,984 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:47:26,984 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:47:26,984 - api.main - INFO - Services initialized successfully
2025-08-19 22:47:26,984 - api.main - INFO - Starting task workers...
2025-08-19 22:47:26,984 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:47:26,984 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:47:26,984 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:47:27,359 - watchfiles.main - INFO - 5 changes detected
2025-08-19 22:47:27,724 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:47:28,754 - api.main - INFO - Initializing database...
2025-08-19 22:47:28,756 - api.main - INFO - Initializing services...
2025-08-19 22:47:28,816 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:47:28,892 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:47:29,080 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:47:29,081 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:47:29,081 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:47:29,081 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:47:29,084 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:48:56,695 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-19 22:48:56,695 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-19 22:48:56,695 - __main__ - INFO - Workers: 1, Log level: info
2025-08-19 22:48:57,275 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:48:58,682 - api.main - INFO - Initializing database...
2025-08-19 22:48:58,684 - api.main - INFO - Initializing services...
2025-08-19 22:48:58,781 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:48:58,881 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:48:59,098 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:48:59,098 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:48:59,098 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:48:59,098 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:48:59,101 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:48:59,918 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:48:59,928 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:48:59,929 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:48:59,937 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:49:00,023 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:49:00,025 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:49:00,025 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:49:00,025 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:49:00,025 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:49:00,026 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:49:00,026 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:49:00,026 - api.main - INFO - Services initialized successfully
2025-08-19 22:49:00,026 - api.main - INFO - Starting task workers...
2025-08-19 22:49:00,026 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:49:00,026 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:49:00,027 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:49:02,730 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:49:02,767 - api.routes.collections - ERROR - Failed to create collection: Instance '<Collection at 0x15716bad0>' is not persistent within this Session
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 42, in create_collection
    collection = await collection_service.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 59, in create_collection
    created_collection = repo.create_by_model(collection)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/repository/base.py", line 54, in create_by_model
    self.session.refresh(entity)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 3147, in refresh
    self._expire_state(state, attribute_names)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 3273, in _expire_state
    self._validate_persistent(state)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4131, in _validate_persistent
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Instance '<Collection at 0x15716bad0>' is not persistent within this Session
2025-08-19 22:53:21,735 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:53:21,886 - api.main - INFO - Shutting down services...
2025-08-19 22:53:21,887 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:53:21,887 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:53:21,888 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:53:21,888 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:53:21,888 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:53:21,888 - services.task_service - INFO - Task workers stopped
2025-08-19 22:53:21,888 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:53:21,889 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:53:21,889 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:21,890 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:53:21,890 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:21,890 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:53:21,890 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:21,890 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:53:21,891 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:21,891 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:53:21,891 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:53:21,891 - api.main - INFO - Services shutdown complete
2025-08-19 22:53:22,275 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:53:22,632 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:53:23,919 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:53:24,108 - api.main - INFO - Initializing database...
2025-08-19 22:53:24,111 - api.main - INFO - Initializing services...
2025-08-19 22:53:24,208 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:24,284 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:53:24,505 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:53:24,506 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:53:24,506 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:53:24,507 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:53:24,509 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:25,384 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:53:25,394 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:53:25,394 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:53:25,404 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:25,489 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:53:25,492 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:25,492 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:53:25,492 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:53:25,492 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:53:25,492 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:53:25,493 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:53:25,493 - api.main - INFO - Services initialized successfully
2025-08-19 22:53:25,493 - api.main - INFO - Starting task workers...
2025-08-19 22:53:25,493 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:53:25,493 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:53:25,493 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:53:28,436 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:53:28,626 - api.main - INFO - Shutting down services...
2025-08-19 22:53:28,626 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:53:28,626 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:53:28,626 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:53:28,626 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:53:28,626 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:53:28,627 - services.task_service - INFO - Task workers stopped
2025-08-19 22:53:28,627 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:53:28,627 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:53:28,627 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:28,627 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:53:28,627 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:28,627 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:53:28,628 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:28,628 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:53:28,628 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:28,628 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:53:28,628 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:53:28,628 - api.main - INFO - Services shutdown complete
2025-08-19 22:53:28,993 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:53:30,438 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:53:30,556 - api.main - INFO - Initializing database...
2025-08-19 22:53:30,558 - api.main - INFO - Initializing services...
2025-08-19 22:53:30,623 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:30,798 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:53:30,943 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:53:30,943 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:53:30,944 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:53:30,944 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:53:30,946 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:31,788 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:53:31,794 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:53:31,795 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:53:31,801 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:31,880 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:53:31,883 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:31,883 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:53:31,883 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:53:31,883 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:53:31,884 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:53:31,884 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:53:31,884 - api.main - INFO - Services initialized successfully
2025-08-19 22:53:31,884 - api.main - INFO - Starting task workers...
2025-08-19 22:53:31,884 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:53:31,885 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:53:31,885 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:53:33,307 - watchfiles.main - INFO - 1 change detected
2025-08-19 22:53:33,500 - api.main - INFO - Shutting down services...
2025-08-19 22:53:33,500 - services.task_service - INFO - Stopping task workers...
2025-08-19 22:53:33,501 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-19 22:53:33,501 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-19 22:53:33,501 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-19 22:53:33,501 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-19 22:53:33,502 - services.task_service - INFO - Task workers stopped
2025-08-19 22:53:33,502 - services.task_service - INFO - TaskService resources closed
2025-08-19 22:53:33,502 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-19 22:53:33,502 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:33,502 - services.chat_service - INFO - ChatService resources closed
2025-08-19 22:53:33,502 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:33,503 - services.document_service - INFO - DocumentService resources closed
2025-08-19 22:53:33,503 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:33,503 - services.query_service - INFO - QueryService resources closed
2025-08-19 22:53:33,503 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-19 22:53:33,503 - services.collection_service - INFO - CollectionService resources closed
2025-08-19 22:53:33,503 - services.settings_service - INFO - SettingsService resources closed
2025-08-19 22:53:33,503 - api.main - INFO - Services shutdown complete
2025-08-19 22:53:33,873 - watchfiles.main - INFO - 3 changes detected
2025-08-19 22:53:35,236 - api.main - INFO - Initializing database...
2025-08-19 22:53:35,238 - api.main - INFO - Initializing services...
2025-08-19 22:53:35,298 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:35,551 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:53:35,551 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:53:35,551 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:53:35,551 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:53:35,554 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:36,411 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:53:36,419 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:53:36,419 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:53:36,428 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:36,510 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:53:36,513 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:36,513 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:53:36,513 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:53:36,513 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:53:36,513 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:53:36,513 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:53:36,513 - api.main - INFO - Services initialized successfully
2025-08-19 22:53:36,514 - api.main - INFO - Starting task workers...
2025-08-19 22:53:36,514 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:53:36,514 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:53:36,514 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:53:36,883 - watchfiles.main - INFO - 8 changes detected
2025-08-19 22:53:38,250 - api.main - INFO - Initializing database...
2025-08-19 22:53:38,252 - api.main - INFO - Initializing services...
2025-08-19 22:53:38,314 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:38,424 - watchfiles.main - INFO - 2 changes detected
2025-08-19 22:53:38,573 - services.chat_service - INFO - ChatService initialized successfully
2025-08-19 22:53:38,574 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-19 22:53:38,574 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-19 22:53:38,574 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-19 22:53:38,577 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:39,392 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-19 22:53:39,399 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-19 22:53:39,400 - services.document_service - INFO - DocumentService initialized successfully
2025-08-19 22:53:39,409 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:39,493 - services.query_service - INFO - QueryService initialized successfully
2025-08-19 22:53:39,496 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-19 22:53:39,496 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-19 22:53:39,496 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-19 22:53:39,496 - services.task_service - INFO - TaskService initialized successfully
2025-08-19 22:53:39,496 - api.main - INFO - Initializing enhanced chat service...
2025-08-19 22:53:39,496 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-19 22:53:39,496 - api.main - INFO - Services initialized successfully
2025-08-19 22:53:39,496 - api.main - INFO - Starting task workers...
2025-08-19 22:53:39,497 - services.task_service - INFO - Starting 2 task workers
2025-08-19 22:53:39,497 - services.task_service - INFO - Task worker worker-0 started
2025-08-19 22:53:39,497 - services.task_service - INFO - Task worker worker-1 started
2025-08-19 22:53:43,576 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:53:43,619 - api.routes.collections - ERROR - Failed to create collection: Collection [wechat_miniapdpdddd] does not exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 42, in create_collection
    collection = await collection_service.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 62, in create_collection
    await self.chroma_manager.ensure_collection(collection_id)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/vector_store/chroma_client.py", line 60, in ensure_collection
    self.client.get_collection(name=collection_name)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/client.py", line 192, in get_collection
    model = self._server.get_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/rust.py", line 248, in get_collection
    collection = self.bindings.get_collection(name, tenant, database)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.NotFoundError: Collection [wechat_miniapdpdddd] does not exists
2025-08-19 22:53:45,330 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:53:45,336 - api.routes.collections - ERROR - Failed to create collection: Collection [wechat_miniapdpdddd] does not exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 42, in create_collection
    collection = await collection_service.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 62, in create_collection
    await self.chroma_manager.ensure_collection(collection_id)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/vector_store/chroma_client.py", line 60, in ensure_collection
    self.client.get_collection(name=collection_name)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/client.py", line 192, in get_collection
    model = self._server.get_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/rust.py", line 248, in get_collection
    collection = self.bindings.get_collection(name, tenant, database)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.NotFoundError: Collection [wechat_miniapdpdddd] does not exists
2025-08-19 22:53:45,957 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:53:45,963 - api.routes.collections - ERROR - Failed to create collection: Collection [wechat_miniapdpdddd] does not exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 42, in create_collection
    collection = await collection_service.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 62, in create_collection
    await self.chroma_manager.ensure_collection(collection_id)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/vector_store/chroma_client.py", line 60, in ensure_collection
    self.client.get_collection(name=collection_name)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/client.py", line 192, in get_collection
    model = self._server.get_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/rust.py", line 248, in get_collection
    collection = self.bindings.get_collection(name, tenant, database)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.NotFoundError: Collection [wechat_miniapdpdddd] does not exists
2025-08-19 22:53:56,308 - api.middleware - INFO - POST /api/v1/collections
2025-08-19 22:53:56,312 - api.routes.collections - ERROR - Failed to create collection: Collection [wechat_miniapdpdddd] does not exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 42, in create_collection
    collection = await collection_service.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 62, in create_collection
    await self.chroma_manager.ensure_collection(collection_id)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/vector_store/chroma_client.py", line 60, in ensure_collection
    self.client.get_collection(name=collection_name)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/client.py", line 192, in get_collection
    model = self._server.get_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/rust.py", line 248, in get_collection
    collection = self.bindings.get_collection(name, tenant, database)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.NotFoundError: Collection [wechat_miniapdpdddd] does not exists
2025-08-20 17:49:08,069 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-20 17:49:08,070 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-20 17:49:08,070 - __main__ - INFO - Workers: 1, Log level: info
2025-08-20 17:49:08,657 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:49:10,396 - api.main - INFO - Initializing database...
2025-08-20 17:49:10,407 - api.main - INFO - Initializing services...
2025-08-20 17:49:10,476 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:49:10,545 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:49:10,835 - watchfiles.main - INFO - 2 changes detected
2025-08-20 17:49:10,844 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:49:10,844 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:49:10,844 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:49:10,845 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:49:10,847 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:49:11,260 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:49:11,268 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:49:11,268 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:49:11,278 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:49:11,321 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:49:11,324 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:49:11,325 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:49:11,325 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:49:11,325 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:49:11,325 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:49:11,325 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:49:11,325 - api.main - INFO - Services initialized successfully
2025-08-20 17:49:11,325 - api.main - INFO - Starting task workers...
2025-08-20 17:49:11,325 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:49:11,326 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:49:11,326 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:49:39,102 - api.middleware - INFO - GET /docs
2025-08-20 17:49:40,572 - api.middleware - INFO - GET /openapi.json
2025-08-20 17:49:48,888 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:49:48,937 - api.routes.collections - ERROR - Failed to create collection: Collection [string] does not exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 42, in create_collection
    collection = await collection_service.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 62, in create_collection
    await self.chroma_manager.ensure_collection(collection_id)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/vector_store/chroma_client.py", line 60, in ensure_collection
    self.client.get_collection(name=collection_name)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/client.py", line 192, in get_collection
    model = self._server.get_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/rust.py", line 248, in get_collection
    collection = self.bindings.get_collection(name, tenant, database)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.NotFoundError: Collection [string] does not exists
2025-08-20 17:50:19,545 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:50:19,559 - api.routes.collections - ERROR - Failed to create collection: Collection [string] does not exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 42, in create_collection
    collection = await collection_service.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 62, in create_collection
    await self.chroma_manager.ensure_collection(collection_id)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/vector_store/chroma_client.py", line 60, in ensure_collection
    self.client.get_collection(name=collection_name)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/client.py", line 192, in get_collection
    model = self._server.get_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/chromadb/api/rust.py", line 248, in get_collection
    collection = self.bindings.get_collection(name, tenant, database)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.NotFoundError: Collection [string] does not exists
2025-08-20 17:50:24,773 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:50:24,915 - api.main - INFO - Shutting down services...
2025-08-20 17:50:24,915 - services.task_service - INFO - Stopping task workers...
2025-08-20 17:50:24,915 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 17:50:24,916 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 17:50:24,916 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 17:50:24,916 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 17:50:24,916 - services.task_service - INFO - Task workers stopped
2025-08-20 17:50:24,916 - services.task_service - INFO - TaskService resources closed
2025-08-20 17:50:24,916 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 17:50:24,916 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:24,916 - services.chat_service - INFO - ChatService resources closed
2025-08-20 17:50:24,917 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:24,917 - services.document_service - INFO - DocumentService resources closed
2025-08-20 17:50:24,917 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:24,917 - services.query_service - INFO - QueryService resources closed
2025-08-20 17:50:24,917 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:24,917 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 17:50:24,917 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 17:50:24,917 - api.main - INFO - Services shutdown complete
2025-08-20 17:50:25,294 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:50:25,650 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:50:26,235 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:50:26,999 - api.main - INFO - Initializing database...
2025-08-20 17:50:27,003 - api.main - INFO - Initializing services...
2025-08-20 17:50:27,069 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:27,073 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:50:27,266 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:50:27,266 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:50:27,266 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:50:27,267 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:50:27,270 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:27,435 - watchfiles.main - INFO - 2 changes detected
2025-08-20 17:50:27,648 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:50:27,657 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:50:27,657 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:50:27,665 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:27,704 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:50:27,707 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:27,707 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:50:27,707 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:50:27,707 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:50:27,707 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:50:27,707 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:50:27,707 - api.main - INFO - Services initialized successfully
2025-08-20 17:50:27,708 - api.main - INFO - Starting task workers...
2025-08-20 17:50:27,708 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:50:27,708 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:50:27,708 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:50:27,712 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:50:43,651 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:50:49,502 - vector_store.chroma_client - INFO - Created collection 'string'
2025-08-20 17:50:49,502 - services.collection_service - INFO - Created collection 'string' with name 'string'
2025-08-20 17:50:49,606 - api.main - INFO - Shutting down services...
2025-08-20 17:50:49,606 - services.task_service - INFO - Stopping task workers...
2025-08-20 17:50:49,607 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 17:50:49,607 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 17:50:49,607 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 17:50:49,607 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 17:50:49,607 - services.task_service - INFO - Task workers stopped
2025-08-20 17:50:49,607 - services.task_service - INFO - TaskService resources closed
2025-08-20 17:50:49,607 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 17:50:49,607 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:49,608 - services.chat_service - INFO - ChatService resources closed
2025-08-20 17:50:49,608 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:49,608 - services.document_service - INFO - DocumentService resources closed
2025-08-20 17:50:49,608 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:49,608 - services.query_service - INFO - QueryService resources closed
2025-08-20 17:50:49,608 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:49,608 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 17:50:49,608 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 17:50:49,608 - api.main - INFO - Services shutdown complete
2025-08-20 17:50:49,985 - watchfiles.main - INFO - 8 changes detected
2025-08-20 17:50:51,502 - api.main - INFO - Initializing database...
2025-08-20 17:50:51,505 - api.main - INFO - Initializing services...
2025-08-20 17:50:51,571 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:51,771 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:50:51,772 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:50:51,772 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:50:51,773 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:50:51,777 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:52,112 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:50:52,115 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:50:52,115 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:50:52,118 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:52,145 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:50:52,148 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:52,148 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:50:52,148 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:50:52,148 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:50:52,148 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:50:52,148 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:50:52,149 - api.main - INFO - Services initialized successfully
2025-08-20 17:50:52,149 - api.main - INFO - Starting task workers...
2025-08-20 17:50:52,149 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:50:52,149 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:50:52,149 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:50:52,520 - watchfiles.main - INFO - 8 changes detected
2025-08-20 17:50:53,906 - api.main - INFO - Initializing database...
2025-08-20 17:50:53,909 - api.main - INFO - Initializing services...
2025-08-20 17:50:53,977 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:54,057 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:50:54,161 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:50:54,162 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:50:54,162 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:50:54,162 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:50:54,165 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:54,498 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:50:54,502 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:50:54,502 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:50:54,506 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:54,536 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:50:54,538 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:54,538 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:50:54,538 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:50:54,539 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:50:54,539 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:50:54,539 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:50:54,539 - api.main - INFO - Services initialized successfully
2025-08-20 17:50:54,539 - api.main - INFO - Starting task workers...
2025-08-20 17:50:54,539 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:50:54,539 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:50:54,539 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:50:55,225 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:50:55,347 - api.main - INFO - Shutting down services...
2025-08-20 17:50:55,347 - services.task_service - INFO - Stopping task workers...
2025-08-20 17:50:55,347 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 17:50:55,348 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 17:50:55,348 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 17:50:55,348 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 17:50:55,348 - services.task_service - INFO - Task workers stopped
2025-08-20 17:50:55,348 - services.task_service - INFO - TaskService resources closed
2025-08-20 17:50:55,348 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 17:50:55,349 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:55,349 - services.chat_service - INFO - ChatService resources closed
2025-08-20 17:50:55,349 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:55,349 - services.document_service - INFO - DocumentService resources closed
2025-08-20 17:50:55,349 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:55,349 - services.query_service - INFO - QueryService resources closed
2025-08-20 17:50:55,349 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:50:55,349 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 17:50:55,350 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 17:50:55,350 - api.main - INFO - Services shutdown complete
2025-08-20 17:50:55,782 - watchfiles.main - INFO - 4 changes detected
2025-08-20 17:50:56,564 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:50:57,124 - api.main - INFO - Initializing database...
2025-08-20 17:50:57,127 - api.main - INFO - Initializing services...
2025-08-20 17:50:57,193 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:57,300 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:50:57,365 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:50:57,365 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:50:57,366 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:50:57,366 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:50:57,369 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:57,730 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:50:57,735 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:50:57,735 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:50:57,742 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:57,778 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:50:57,781 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:50:57,781 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:50:57,781 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:50:57,781 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:50:57,781 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:50:57,781 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:50:57,782 - api.main - INFO - Services initialized successfully
2025-08-20 17:50:57,782 - api.main - INFO - Starting task workers...
2025-08-20 17:50:57,782 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:50:57,782 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:50:57,782 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:51:00,284 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:51:00,410 - api.main - INFO - Shutting down services...
2025-08-20 17:51:00,410 - services.task_service - INFO - Stopping task workers...
2025-08-20 17:51:00,411 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 17:51:00,411 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 17:51:00,411 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 17:51:00,411 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 17:51:00,412 - services.task_service - INFO - Task workers stopped
2025-08-20 17:51:00,412 - services.task_service - INFO - TaskService resources closed
2025-08-20 17:51:00,412 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 17:51:00,412 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:51:00,412 - services.chat_service - INFO - ChatService resources closed
2025-08-20 17:51:00,413 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:51:00,413 - services.document_service - INFO - DocumentService resources closed
2025-08-20 17:51:00,413 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:51:00,413 - services.query_service - INFO - QueryService resources closed
2025-08-20 17:51:00,413 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:51:00,413 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 17:51:00,413 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 17:51:00,413 - api.main - INFO - Services shutdown complete
2025-08-20 17:51:00,803 - watchfiles.main - INFO - 4 changes detected
2025-08-20 17:51:01,821 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:51:02,383 - api.main - INFO - Initializing database...
2025-08-20 17:51:02,387 - api.main - INFO - Initializing services...
2025-08-20 17:51:02,448 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:02,555 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:51:02,619 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:51:02,619 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:51:02,619 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:51:02,619 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:51:02,622 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:02,918 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:51:03,603 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:51:03,646 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:51:03,646 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:51:03,649 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:03,674 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:51:03,677 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:03,677 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:51:03,677 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:51:03,677 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:51:03,677 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:51:03,677 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:51:03,677 - api.main - INFO - Services initialized successfully
2025-08-20 17:51:03,677 - api.main - INFO - Starting task workers...
2025-08-20 17:51:03,678 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:51:03,680 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:51:03,680 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:51:04,056 - watchfiles.main - INFO - 4 changes detected
2025-08-20 17:51:05,058 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:51:05,421 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:51:05,655 - api.main - INFO - Initializing database...
2025-08-20 17:51:05,663 - api.main - INFO - Initializing services...
2025-08-20 17:51:05,749 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:05,984 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:51:05,984 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:51:05,984 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:51:05,984 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:51:05,987 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:06,330 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:51:06,333 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:51:06,333 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:51:06,336 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:06,362 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:51:06,364 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:06,364 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:51:06,364 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:51:06,365 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:51:06,365 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:51:06,365 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:51:06,365 - api.main - INFO - Services initialized successfully
2025-08-20 17:51:06,365 - api.main - INFO - Starting task workers...
2025-08-20 17:51:06,365 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:51:06,365 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:51:06,365 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:51:06,740 - watchfiles.main - INFO - 6 changes detected
2025-08-20 17:51:07,634 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:51:08,136 - api.main - INFO - Initializing database...
2025-08-20 17:51:08,138 - api.main - INFO - Initializing services...
2025-08-20 17:51:08,198 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:08,264 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:51:08,367 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:51:08,368 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:51:08,368 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:51:08,368 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:51:08,371 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:08,692 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:51:08,701 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:51:08,702 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:51:08,705 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:08,739 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:51:08,742 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:51:08,742 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:51:08,742 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:51:08,742 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:51:08,742 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:51:08,742 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:51:08,742 - api.main - INFO - Services initialized successfully
2025-08-20 17:51:08,742 - api.main - INFO - Starting task workers...
2025-08-20 17:51:08,742 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:51:08,743 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:51:08,743 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:51:10,846 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:51:10,880 - services.collection_service - WARNING - Collection with id 'string' already exists
2025-08-20 17:51:10,880 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'string' already exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 49, in create_collection
    raise_conflict(f"Collection with id '{request_data.id}' already exists")
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/response_utils.py", line 152, in raise_conflict
    raise HTTPException(
fastapi.exceptions.HTTPException: 409: Collection with id 'string' already exists
2025-08-20 17:51:12,016 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:51:12,019 - services.collection_service - WARNING - Collection with id 'string' already exists
2025-08-20 17:51:12,020 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'string' already exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 49, in create_collection
    raise_conflict(f"Collection with id '{request_data.id}' already exists")
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/response_utils.py", line 152, in raise_conflict
    raise HTTPException(
fastapi.exceptions.HTTPException: 409: Collection with id 'string' already exists
2025-08-20 17:51:40,042 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:51:40,079 - vector_store.chroma_client - INFO - Collection 'string' already exists
2025-08-20 17:51:40,080 - services.collection_service - INFO - Created collection 'string' with name 'string'
2025-08-20 17:52:00,932 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-20 17:52:00,932 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-20 17:52:00,932 - __main__ - INFO - Workers: 1, Log level: info
2025-08-20 17:52:02,832 - api.main - INFO - Initializing database...
2025-08-20 17:52:02,834 - api.main - INFO - Initializing services...
2025-08-20 17:52:02,904 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:52:03,012 - watchfiles.main - INFO - 2 changes detected
2025-08-20 17:52:03,097 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:52:03,097 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:52:03,097 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:52:03,098 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:52:03,100 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:52:03,423 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:52:03,431 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:52:03,431 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:52:03,437 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:52:03,473 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:52:03,476 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:52:03,476 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:52:03,476 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:52:03,476 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:52:03,477 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:52:03,477 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:52:03,477 - api.main - INFO - Services initialized successfully
2025-08-20 17:52:03,477 - api.main - INFO - Starting task workers...
2025-08-20 17:52:03,477 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:52:03,477 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:52:03,478 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:52:06,275 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:52:06,312 - services.collection_service - WARNING - Collection with id 'string' already exists
2025-08-20 17:52:06,313 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'string' already exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 49, in create_collection
    raise_conflict(f"Collection with id '{request_data.id}' already exists")
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/response_utils.py", line 152, in raise_conflict
    raise HTTPException(
fastapi.exceptions.HTTPException: 409: Collection with id 'string' already exists
2025-08-20 17:52:17,187 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:52:17,207 - vector_store.chroma_client - INFO - Collection 'string' already exists
2025-08-20 17:52:17,208 - services.collection_service - INFO - Created collection 'string' with name 'string'
2025-08-20 17:53:16,714 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:53:16,729 - vector_store.chroma_client - INFO - Collection 'string' already exists
2025-08-20 17:53:45,411 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:54:23,600 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:54:25,095 - services.collection_service - INFO - Created collection 'string' with name 'string'
2025-08-20 17:54:25,202 - api.main - INFO - Shutting down services...
2025-08-20 17:54:25,202 - services.task_service - INFO - Stopping task workers...
2025-08-20 17:54:25,203 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 17:54:25,203 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 17:54:25,203 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 17:54:25,203 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 17:54:25,203 - services.task_service - INFO - Task workers stopped
2025-08-20 17:54:25,203 - services.task_service - INFO - TaskService resources closed
2025-08-20 17:54:25,203 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 17:54:25,203 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:54:25,204 - services.chat_service - INFO - ChatService resources closed
2025-08-20 17:54:25,204 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:54:25,204 - services.document_service - INFO - DocumentService resources closed
2025-08-20 17:54:25,204 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:54:25,204 - services.query_service - INFO - QueryService resources closed
2025-08-20 17:54:25,204 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:54:25,204 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 17:54:25,204 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 17:54:25,204 - api.main - INFO - Services shutdown complete
2025-08-20 17:54:25,583 - watchfiles.main - INFO - 5 changes detected
2025-08-20 17:54:26,486 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:54:27,036 - api.main - INFO - Initializing database...
2025-08-20 17:54:27,038 - api.main - INFO - Initializing services...
2025-08-20 17:54:27,103 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:27,174 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:54:27,287 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:54:27,287 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:54:27,287 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:54:27,287 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:54:27,290 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:27,638 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:54:27,646 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:54:27,646 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:54:27,655 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:27,680 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:54:27,683 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:27,683 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:54:27,683 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:54:27,683 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:54:27,684 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:54:27,684 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:54:27,684 - api.main - INFO - Services initialized successfully
2025-08-20 17:54:27,684 - api.main - INFO - Starting task workers...
2025-08-20 17:54:27,684 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:54:27,685 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:54:27,685 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:54:32,488 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-20 17:54:32,488 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-20 17:54:32,489 - __main__ - INFO - Workers: 1, Log level: info
2025-08-20 17:54:34,165 - api.main - INFO - Initializing database...
2025-08-20 17:54:34,168 - api.main - INFO - Initializing services...
2025-08-20 17:54:34,234 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:34,316 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:54:34,443 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:54:34,443 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:54:34,443 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:54:34,443 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:54:34,446 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:34,777 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:54:34,779 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:54:34,780 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:54:34,783 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:34,811 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:54:34,814 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:54:34,814 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:54:34,814 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:54:34,814 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:54:34,814 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:54:34,814 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:54:34,815 - api.main - INFO - Services initialized successfully
2025-08-20 17:54:34,815 - api.main - INFO - Starting task workers...
2025-08-20 17:54:34,815 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:54:34,815 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:54:34,815 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:54:38,815 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:55:05,617 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:55:39,898 - vector_store.chroma_client - INFO - Created collection 'strding'
2025-08-20 17:55:39,898 - services.collection_service - INFO - Created collection 'strding' with name 'string'
2025-08-20 17:55:40,002 - api.main - INFO - Shutting down services...
2025-08-20 17:55:40,002 - services.task_service - INFO - Stopping task workers...
2025-08-20 17:55:40,002 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 17:55:40,002 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 17:55:40,002 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 17:55:40,003 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 17:55:40,003 - services.task_service - INFO - Task workers stopped
2025-08-20 17:55:40,003 - services.task_service - INFO - TaskService resources closed
2025-08-20 17:55:40,003 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 17:55:40,003 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:55:40,003 - services.chat_service - INFO - ChatService resources closed
2025-08-20 17:55:40,003 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:55:40,003 - services.document_service - INFO - DocumentService resources closed
2025-08-20 17:55:40,003 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:55:40,003 - services.query_service - INFO - QueryService resources closed
2025-08-20 17:55:40,004 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 17:55:40,004 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 17:55:40,004 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 17:55:40,004 - api.main - INFO - Services shutdown complete
2025-08-20 17:55:40,374 - watchfiles.main - INFO - 8 changes detected
2025-08-20 17:55:41,992 - api.main - INFO - Initializing database...
2025-08-20 17:55:41,995 - api.main - INFO - Initializing services...
2025-08-20 17:55:42,064 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:42,275 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:55:42,276 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:55:42,276 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:55:42,276 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:55:42,278 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:42,757 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:55:42,761 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:55:42,761 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:55:42,766 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:42,799 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:55:42,802 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:42,802 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:55:42,803 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:55:42,803 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:55:42,803 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:55:42,803 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:55:42,803 - api.main - INFO - Services initialized successfully
2025-08-20 17:55:42,804 - api.main - INFO - Starting task workers...
2025-08-20 17:55:42,804 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:55:42,805 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:55:42,805 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:55:43,185 - watchfiles.main - INFO - 8 changes detected
2025-08-20 17:55:44,566 - api.main - INFO - Initializing database...
2025-08-20 17:55:44,569 - api.main - INFO - Initializing services...
2025-08-20 17:55:44,628 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:44,689 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:55:44,798 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:55:44,799 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:55:44,799 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:55:44,799 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:55:44,802 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:45,050 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:55:45,118 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:55:45,121 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:55:45,122 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:55:45,126 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:45,165 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:55:45,178 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:45,178 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:55:45,179 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:55:45,180 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:55:45,180 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:55:45,180 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:55:45,180 - api.main - INFO - Services initialized successfully
2025-08-20 17:55:45,180 - api.main - INFO - Starting task workers...
2025-08-20 17:55:45,180 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:55:45,181 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:55:45,181 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:55:45,560 - watchfiles.main - INFO - 4 changes detected
2025-08-20 17:55:46,405 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:55:46,951 - api.main - INFO - Initializing database...
2025-08-20 17:55:46,954 - api.main - INFO - Initializing services...
2025-08-20 17:55:47,020 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:47,099 - watchfiles.main - INFO - 3 changes detected
2025-08-20 17:55:47,192 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:55:47,192 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:55:47,192 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:55:47,192 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:55:47,195 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:47,508 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:55:47,512 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:55:47,512 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:55:47,518 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:47,547 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:55:47,550 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:55:47,550 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:55:47,550 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:55:47,550 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:55:47,550 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:55:47,550 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:55:47,551 - api.main - INFO - Services initialized successfully
2025-08-20 17:55:47,551 - api.main - INFO - Starting task workers...
2025-08-20 17:55:47,551 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:55:47,551 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:55:47,551 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:56:31,385 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-20 17:56:31,386 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-20 17:56:31,386 - __main__ - INFO - Workers: 1, Log level: info
2025-08-20 17:56:33,283 - api.main - INFO - Initializing database...
2025-08-20 17:56:33,288 - api.main - INFO - Initializing services...
2025-08-20 17:56:33,381 - watchfiles.main - INFO - 1 change detected
2025-08-20 17:56:33,399 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:56:33,657 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 17:56:33,658 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 17:56:33,658 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 17:56:33,658 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 17:56:33,661 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:56:33,741 - watchfiles.main - INFO - 2 changes detected
2025-08-20 17:56:34,051 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 17:56:34,062 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 17:56:34,063 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 17:56:34,071 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:56:34,110 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 17:56:34,113 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 17:56:34,114 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 17:56:34,114 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 17:56:34,114 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 17:56:34,114 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 17:56:34,114 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 17:56:34,114 - api.main - INFO - Services initialized successfully
2025-08-20 17:56:34,114 - api.main - INFO - Starting task workers...
2025-08-20 17:56:34,114 - services.task_service - INFO - Starting 2 task workers
2025-08-20 17:56:34,114 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 17:56:34,115 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 17:56:45,600 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 17:56:45,633 - services.collection_service - WARNING - Collection with id 'strding' already exists
2025-08-20 17:56:45,634 - api.routes.collections - ERROR - Failed to create collection: 409: Collection with id 'strding' already exists
Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 49, in create_collection
    raise_conflict(f"Collection with id '{request_data.id}' already exists")
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/response_utils.py", line 152, in raise_conflict
    raise HTTPException(
fastapi.exceptions.HTTPException: 409: Collection with id 'strding' already exists
2025-08-20 18:01:27,039 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-20 18:01:27,039 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-20 18:01:27,039 - __main__ - INFO - Workers: 1, Log level: info
2025-08-20 18:01:27,569 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:01:29,209 - api.main - INFO - Initializing database...
2025-08-20 18:01:29,214 - api.main - INFO - Initializing services...
2025-08-20 18:01:29,284 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:01:29,321 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:01:29,539 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:01:29,539 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:01:29,539 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:01:29,539 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:01:29,542 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:01:29,650 - watchfiles.main - INFO - 2 changes detected
2025-08-20 18:01:29,922 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:01:29,931 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:01:29,931 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:01:29,938 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:01:29,976 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:01:29,979 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:01:29,980 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:01:29,980 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:01:29,980 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:01:29,980 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:01:29,980 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:01:29,980 - api.main - INFO - Services initialized successfully
2025-08-20 18:01:29,980 - api.main - INFO - Starting task workers...
2025-08-20 18:01:29,980 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:01:29,980 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:01:29,981 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:01:32,732 - api.middleware - INFO - POST /api/v1/collections
2025-08-20 18:01:32,769 - services.collection_service - WARNING - Collection with id 'strding' already exists
2025-08-20 18:02:16,355 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:02:16,553 - api.main - INFO - Shutting down services...
2025-08-20 18:02:16,553 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:02:16,555 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:02:16,555 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:02:16,555 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:02:16,555 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:02:16,556 - services.task_service - INFO - Task workers stopped
2025-08-20 18:02:16,556 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:02:16,556 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:02:16,556 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:02:16,556 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:02:16,557 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:02:16,557 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:02:16,557 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:02:16,557 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:02:16,557 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:02:16,557 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:02:16,557 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:02:16,557 - api.main - INFO - Services shutdown complete
2025-08-20 18:02:16,985 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:02:17,663 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:02:18,133 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:02:19,778 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:02:20,144 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:02:21,718 - api.main - INFO - Initializing database...
2025-08-20 18:02:21,722 - api.main - INFO - Initializing services...
2025-08-20 18:02:21,787 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:21,967 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:02:21,967 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:02:21,967 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:02:21,968 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:02:21,970 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:22,445 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:02:22,449 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:02:22,450 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:02:22,454 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:22,483 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:02:22,486 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:22,487 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:02:22,487 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:02:22,487 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:02:22,487 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:02:22,487 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:02:22,487 - api.main - INFO - Services initialized successfully
2025-08-20 18:02:22,487 - api.main - INFO - Starting task workers...
2025-08-20 18:02:22,487 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:02:22,488 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:02:22,488 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:02:22,857 - watchfiles.main - INFO - 9 changes detected
2025-08-20 18:02:24,324 - api.main - INFO - Initializing database...
2025-08-20 18:02:24,328 - api.main - INFO - Initializing services...
2025-08-20 18:02:24,395 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:24,467 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:02:24,572 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:02:24,573 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:02:24,573 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:02:24,573 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:02:24,575 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:24,909 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:02:24,916 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:02:24,916 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:02:24,922 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:24,950 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:02:24,954 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:02:24,954 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:02:24,954 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:02:24,954 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:02:24,955 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:02:24,955 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:02:24,955 - api.main - INFO - Services initialized successfully
2025-08-20 18:02:24,955 - api.main - INFO - Starting task workers...
2025-08-20 18:02:24,955 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:02:24,956 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:02:24,956 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:02:27,003 - api.middleware - INFO - GET /api/v1/collections
2025-08-20 18:03:05,756 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:05,886 - api.main - INFO - Shutting down services...
2025-08-20 18:03:05,886 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:03:05,886 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:03:05,887 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:03:05,887 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:03:05,887 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:03:05,888 - services.task_service - INFO - Task workers stopped
2025-08-20 18:03:05,888 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:03:05,888 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:03:05,888 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:05,889 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:03:05,889 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:05,889 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:03:05,890 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:05,890 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:03:05,890 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:05,891 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:03:05,891 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:03:05,891 - api.main - INFO - Services shutdown complete
2025-08-20 18:03:06,267 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:03:06,631 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:03:07,731 - api.main - INFO - Initializing database...
2025-08-20 18:03:07,734 - api.main - INFO - Initializing services...
2025-08-20 18:03:07,797 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:07,801 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:07,978 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:03:07,978 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:03:07,978 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:03:07,978 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:03:07,981 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:08,166 - watchfiles.main - INFO - 2 changes detected
2025-08-20 18:03:08,339 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:03:08,347 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:03:08,347 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:03:08,356 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:08,394 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:03:08,397 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:08,397 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:03:08,397 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:03:08,397 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:03:08,398 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:03:08,398 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:03:08,398 - api.main - INFO - Services initialized successfully
2025-08-20 18:03:08,398 - api.main - INFO - Starting task workers...
2025-08-20 18:03:08,398 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:03:08,399 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:03:08,399 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:03:10,432 - api.middleware - INFO - GET /api/v1/collections
2025-08-20 18:03:11,140 - api.middleware - INFO - GET /api/v1/collections
2025-08-20 18:03:11,572 - api.middleware - INFO - GET /api/v1/collections
2025-08-20 18:03:29,630 - api.middleware - INFO - GET /api/v1/collections/strding
2025-08-20 18:03:39,801 - api.middleware - INFO - PATCH /api/v1/collections/strding
2025-08-20 18:03:39,806 - api.routes.collections - ERROR - Failed to update collection: SQL expression element or literal value expected, got <Collection(id='strding', name='string')>.
2025-08-20 18:03:45,032 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:45,136 - api.main - INFO - Shutting down services...
2025-08-20 18:03:45,136 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:03:45,136 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:03:45,136 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:03:45,137 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:03:45,137 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:03:45,137 - services.task_service - INFO - Task workers stopped
2025-08-20 18:03:45,137 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:03:45,138 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:03:45,138 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:45,138 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:03:45,138 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:45,139 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:03:45,139 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:45,139 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:03:45,139 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:45,139 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:03:45,139 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:03:45,139 - api.main - INFO - Services shutdown complete
2025-08-20 18:03:45,517 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:03:45,881 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:03:47,085 - api.main - INFO - Initializing database...
2025-08-20 18:03:47,088 - api.main - INFO - Initializing services...
2025-08-20 18:03:47,153 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:47,159 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:47,348 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:03:47,348 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:03:47,349 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:03:47,349 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:03:47,352 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:47,516 - watchfiles.main - INFO - 2 changes detected
2025-08-20 18:03:47,738 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:03:47,741 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:03:47,741 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:03:47,744 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:47,772 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:03:47,774 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:47,775 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:03:47,775 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:03:47,775 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:03:47,775 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:03:47,775 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:03:47,775 - api.main - INFO - Services initialized successfully
2025-08-20 18:03:47,775 - api.main - INFO - Starting task workers...
2025-08-20 18:03:47,775 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:03:47,776 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:03:47,776 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:03:54,707 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:54,846 - api.main - INFO - Shutting down services...
2025-08-20 18:03:54,847 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:03:54,847 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:03:54,847 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:03:54,847 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:03:54,847 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:03:54,848 - services.task_service - INFO - Task workers stopped
2025-08-20 18:03:54,848 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:03:54,848 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:03:54,848 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:54,848 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:03:54,848 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:54,848 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:03:54,849 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:54,849 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:03:54,849 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:03:54,849 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:03:54,849 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:03:54,849 - api.main - INFO - Services shutdown complete
2025-08-20 18:03:55,226 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:03:55,591 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:56,223 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:56,752 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:57,651 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:03:58,172 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:03:59,445 - api.main - INFO - Initializing database...
2025-08-20 18:03:59,448 - api.main - INFO - Initializing services...
2025-08-20 18:03:59,512 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:03:59,616 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:03:59,696 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:03:59,696 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:03:59,696 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:03:59,696 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:03:59,699 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:00,030 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:04:00,034 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:04:00,034 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:04:00,039 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:00,068 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:04:00,071 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:00,071 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:04:00,071 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:04:00,071 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:04:00,071 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:04:00,072 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:04:00,072 - api.main - INFO - Services initialized successfully
2025-08-20 18:04:00,072 - api.main - INFO - Starting task workers...
2025-08-20 18:04:00,072 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:04:00,072 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:04:00,072 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:04:02,665 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:02,803 - api.main - INFO - Shutting down services...
2025-08-20 18:04:02,803 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:04:02,804 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:04:02,804 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:04:02,804 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:04:02,804 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:04:02,804 - services.task_service - INFO - Task workers stopped
2025-08-20 18:04:02,804 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:04:02,804 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:04:02,804 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:02,805 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:04:02,805 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:02,805 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:04:02,805 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:02,805 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:04:02,805 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:02,805 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:04:02,805 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:04:02,805 - api.main - INFO - Services shutdown complete
2025-08-20 18:04:03,182 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:04:05,548 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:06,074 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:07,300 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:07,824 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:04:08,562 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:09,048 - api.main - INFO - Initializing database...
2025-08-20 18:04:09,051 - api.main - INFO - Initializing services...
2025-08-20 18:04:09,111 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:09,280 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:04:09,281 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:04:09,281 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:04:09,281 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:04:09,284 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:09,596 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:04:09,599 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:04:09,599 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:04:09,603 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:09,636 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:04:09,639 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:09,639 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:04:09,639 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:04:09,639 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:04:09,639 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:04:09,639 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:04:09,639 - api.main - INFO - Services initialized successfully
2025-08-20 18:04:09,639 - api.main - INFO - Starting task workers...
2025-08-20 18:04:09,640 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:04:09,640 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:04:09,640 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:04:10,011 - watchfiles.main - INFO - 6 changes detected
2025-08-20 18:04:10,376 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:04:11,306 - api.main - INFO - Initializing database...
2025-08-20 18:04:11,309 - api.main - INFO - Initializing services...
2025-08-20 18:04:11,369 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:11,440 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:04:11,541 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:04:11,542 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:04:11,542 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:04:11,542 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:04:11,545 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:11,856 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:04:11,861 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:04:11,861 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:04:11,866 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:11,900 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:04:11,903 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:11,903 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:04:11,903 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:04:11,904 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:04:11,904 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:04:11,904 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:04:11,904 - api.main - INFO - Services initialized successfully
2025-08-20 18:04:11,904 - api.main - INFO - Starting task workers...
2025-08-20 18:04:11,904 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:04:11,904 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:04:11,904 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:04:14,267 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:14,429 - api.main - INFO - Shutting down services...
2025-08-20 18:04:14,429 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:04:14,429 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:04:14,429 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:04:14,429 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:04:14,430 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:04:14,430 - services.task_service - INFO - Task workers stopped
2025-08-20 18:04:14,430 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:04:14,430 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:04:14,430 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:14,430 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:04:14,430 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:14,430 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:04:14,430 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:14,430 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:04:14,430 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:14,431 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:04:14,431 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:04:14,431 - api.main - INFO - Services shutdown complete
2025-08-20 18:04:14,800 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:04:15,977 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:16,500 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:04:17,789 - api.main - INFO - Initializing database...
2025-08-20 18:04:17,791 - api.main - INFO - Initializing services...
2025-08-20 18:04:17,852 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:17,945 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:04:18,023 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:04:18,023 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:04:18,023 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:04:18,024 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:04:18,026 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:18,348 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:04:18,351 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:04:18,351 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:04:18,355 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:18,387 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:04:18,390 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:18,390 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:04:18,390 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:04:18,390 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:04:18,390 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:04:18,390 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:04:18,390 - api.main - INFO - Services initialized successfully
2025-08-20 18:04:18,391 - api.main - INFO - Starting task workers...
2025-08-20 18:04:18,391 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:04:18,391 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:04:18,391 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:04:21,309 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:21,425 - api.main - INFO - Shutting down services...
2025-08-20 18:04:21,425 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:04:21,426 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:04:21,426 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:04:21,426 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:04:21,426 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:04:21,427 - services.task_service - INFO - Task workers stopped
2025-08-20 18:04:21,427 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:04:21,427 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:04:21,427 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:21,427 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:04:21,428 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:21,428 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:04:21,428 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:21,428 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:04:21,428 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:04:21,429 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:04:21,429 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:04:21,429 - api.main - INFO - Services shutdown complete
2025-08-20 18:04:21,810 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:04:22,169 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:22,534 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:23,066 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:04:24,265 - api.main - INFO - Initializing database...
2025-08-20 18:04:24,269 - api.main - INFO - Initializing services...
2025-08-20 18:04:24,331 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:24,333 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:04:24,520 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:04:24,520 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:04:24,520 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:04:24,520 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:04:24,523 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:24,696 - watchfiles.main - INFO - 2 changes detected
2025-08-20 18:04:24,862 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:04:24,866 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:04:24,866 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:04:24,869 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:24,895 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:04:24,898 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:04:24,898 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:04:24,898 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:04:24,898 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:04:24,898 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:04:24,898 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:04:24,899 - api.main - INFO - Services initialized successfully
2025-08-20 18:04:24,899 - api.main - INFO - Starting task workers...
2025-08-20 18:04:24,899 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:04:24,899 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:04:24,899 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:05:10,233 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:05:10,411 - api.main - INFO - Shutting down services...
2025-08-20 18:05:10,412 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:05:10,412 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:05:10,413 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:05:10,413 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:05:10,413 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:05:10,414 - services.task_service - INFO - Task workers stopped
2025-08-20 18:05:10,414 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:05:10,415 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:05:10,415 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:05:10,415 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:05:10,416 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:05:10,416 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:05:10,417 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:05:10,417 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:05:10,418 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:05:10,418 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:05:10,418 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:05:10,418 - api.main - INFO - Services shutdown complete
2025-08-20 18:05:10,801 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:05:11,163 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:05:12,175 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:05:12,277 - api.main - INFO - Initializing database...
2025-08-20 18:05:12,280 - api.main - INFO - Initializing services...
2025-08-20 18:05:12,343 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:05:12,540 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:05:12,550 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:05:12,550 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:05:12,550 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:05:12,551 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:05:12,553 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:05:12,901 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:05:12,907 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:05:12,907 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:05:12,912 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:05:12,940 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:05:12,943 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:05:12,943 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:05:12,943 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:05:12,943 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:05:12,943 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:05:12,943 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:05:12,943 - api.main - INFO - Services initialized successfully
2025-08-20 18:05:12,943 - api.main - INFO - Starting task workers...
2025-08-20 18:05:12,944 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:05:12,944 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:05:12,944 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:05:43,093 - api.middleware - INFO - PATCH /api/v1/collections/strding
2025-08-20 18:05:43,132 - api.middleware - ERROR - Unhandled exception: SQL expression element or literal value expected, got <Collection(id='strding', name='string')>.
2025-08-20 18:05:43,144 - api.middleware - ERROR - Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 803, in _literal_coercion
    return expr._bind_param(operator, element, type_=bindparam_type)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 4633, in _bind_param
    return BindParameter(
           ^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 2054, in __init__
    self.type = _compared_to_type.coerce_compared_value(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/type_api.py", line 1065, in coerce_compared_value
    _coerced_type = _resolve_value_to_type(value)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 3911, in _resolve_value_to_type
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Object <Collection(id='strding', name='string')> is not legal as a SQL literal value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/middleware.py", line 38, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/api/routes/collections.py", line 98, in update_collection
    collection = await collection_service.update_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/services/collection_service.py", line 105, in update_collection
    updated_collection = repo.update(collection)
                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/repository/base.py", line 110, in update
    .where(self.model.id == entity_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 453, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/orm/properties.py", line 479, in operate
    return op(self.__clause_element__(), *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/annotation.py", line 371, in __eq__
    return self.__element.__class__.__eq__(self, other)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 1534, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/type_api.py", line 210, in operate
    return op_fn(self.expr, op, *other, **addtl_kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/default_comparator.py", line 120, in _boolean_compare
    obj = coercions.expect(
          ^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 805, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 784, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/zouguodong/Code/Personal/ai-document-assistant/backend/.venv/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression element or literal value expected, got <Collection(id='strding', name='string')>.

2025-08-20 18:07:37,935 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:07:38,091 - api.main - INFO - Shutting down services...
2025-08-20 18:07:38,092 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:07:38,092 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:07:38,093 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:07:38,093 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:07:38,093 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:07:38,093 - services.task_service - INFO - Task workers stopped
2025-08-20 18:07:38,094 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:07:38,094 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:07:38,094 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:07:38,094 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:07:38,095 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:07:38,095 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:07:38,095 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:07:38,095 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:07:38,095 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:07:38,095 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:07:38,096 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:07:38,096 - api.main - INFO - Services shutdown complete
2025-08-20 18:07:38,477 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:07:38,843 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:07:39,961 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:07:40,113 - api.main - INFO - Initializing database...
2025-08-20 18:07:40,116 - api.main - INFO - Initializing services...
2025-08-20 18:07:40,185 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:07:40,325 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:07:40,383 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:07:40,384 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:07:40,384 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:07:40,384 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:07:40,387 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:07:40,799 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:07:40,808 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:07:40,808 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:07:40,817 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:07:40,854 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:07:40,858 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:07:40,858 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:07:40,858 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:07:40,858 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:07:40,858 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:07:40,858 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:07:40,858 - api.main - INFO - Services initialized successfully
2025-08-20 18:07:40,858 - api.main - INFO - Starting task workers...
2025-08-20 18:07:40,858 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:07:40,859 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:07:40,859 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:12:18,076 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:12:18,260 - api.main - INFO - Shutting down services...
2025-08-20 18:12:18,261 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:12:18,262 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:12:18,266 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:12:18,267 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:12:18,268 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:12:18,272 - services.task_service - INFO - Task workers stopped
2025-08-20 18:12:18,273 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:12:18,279 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:12:18,280 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:18,280 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:12:18,281 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:18,281 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:12:18,281 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:18,281 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:12:18,281 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:18,282 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:12:18,282 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:12:18,282 - api.main - INFO - Services shutdown complete
2025-08-20 18:12:18,666 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:12:19,029 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:12:20,147 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:12:20,283 - api.main - INFO - Initializing database...
2025-08-20 18:12:20,286 - api.main - INFO - Initializing services...
2025-08-20 18:12:20,354 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:20,509 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:12:20,549 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:12:20,549 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:12:20,549 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:12:20,549 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:12:20,552 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:20,919 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:12:20,925 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:12:20,925 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:12:20,932 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:20,965 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:12:20,968 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:20,968 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:12:20,968 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:12:20,969 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:12:20,969 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:12:20,969 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:12:20,969 - api.main - INFO - Services initialized successfully
2025-08-20 18:12:20,969 - api.main - INFO - Starting task workers...
2025-08-20 18:12:20,969 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:12:20,969 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:12:20,969 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:12:23,753 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:12:23,899 - api.main - INFO - Shutting down services...
2025-08-20 18:12:23,900 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:12:23,900 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:12:23,900 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:12:23,901 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:12:23,901 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:12:23,901 - services.task_service - INFO - Task workers stopped
2025-08-20 18:12:23,901 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:12:23,902 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:12:23,902 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:23,902 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:12:23,902 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:23,902 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:12:23,903 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:23,903 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:12:23,903 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:23,903 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:12:23,903 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:12:23,903 - api.main - INFO - Services shutdown complete
2025-08-20 18:12:24,282 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:12:25,557 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:12:25,625 - api.main - INFO - Initializing database...
2025-08-20 18:12:25,628 - api.main - INFO - Initializing services...
2025-08-20 18:12:25,689 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:25,860 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:12:25,860 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:12:25,860 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:12:25,860 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:12:25,863 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:25,918 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:12:26,205 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:12:26,208 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:12:26,208 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:12:26,212 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:26,240 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:12:26,242 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:26,242 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:12:26,243 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:12:26,243 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:12:26,243 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:12:26,243 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:12:26,243 - api.main - INFO - Services initialized successfully
2025-08-20 18:12:26,243 - api.main - INFO - Starting task workers...
2025-08-20 18:12:26,243 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:12:26,243 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:12:26,243 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:12:33,658 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:12:33,819 - api.main - INFO - Shutting down services...
2025-08-20 18:12:33,819 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:12:33,820 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:12:33,820 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:12:33,820 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:12:33,820 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:12:33,820 - services.task_service - INFO - Task workers stopped
2025-08-20 18:12:33,821 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:12:33,821 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:12:33,821 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:33,821 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:12:33,821 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:33,821 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:12:33,821 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:33,821 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:12:33,822 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:12:33,822 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:12:33,822 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:12:33,822 - api.main - INFO - Services shutdown complete
2025-08-20 18:12:34,197 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:12:35,417 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:12:35,537 - api.main - INFO - Initializing database...
2025-08-20 18:12:35,540 - api.main - INFO - Initializing services...
2025-08-20 18:12:35,603 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:35,780 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:12:35,788 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:12:35,788 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:12:35,788 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:12:35,788 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:12:35,791 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:36,145 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:12:36,151 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:12:36,151 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:12:36,155 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:36,185 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:12:36,188 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:12:36,188 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:12:36,188 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:12:36,189 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:12:36,189 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:12:36,189 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:12:36,189 - api.main - INFO - Services initialized successfully
2025-08-20 18:12:36,189 - api.main - INFO - Starting task workers...
2025-08-20 18:12:36,189 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:12:36,189 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:12:36,189 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:17:09,201 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:17:09,391 - api.main - INFO - Shutting down services...
2025-08-20 18:17:09,391 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:17:09,392 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:17:09,392 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:17:09,392 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:17:09,392 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:17:09,392 - services.task_service - INFO - Task workers stopped
2025-08-20 18:17:09,392 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:17:09,392 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:17:09,393 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:09,393 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:17:09,393 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:09,393 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:17:09,393 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:09,394 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:17:09,394 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:09,394 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:17:09,394 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:17:09,395 - api.main - INFO - Services shutdown complete
2025-08-20 18:17:09,774 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:17:10,133 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:17:11,402 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:17:11,880 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:17:12,994 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:17:13,128 - api.main - INFO - Initializing database...
2025-08-20 18:17:13,131 - api.main - INFO - Initializing services...
2025-08-20 18:17:13,198 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:13,359 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:17:13,392 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:17:13,392 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:17:13,393 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:17:13,393 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:17:13,395 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:13,735 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:17:13,739 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:17:13,739 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:17:13,744 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:13,774 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:17:13,777 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:13,778 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:17:13,778 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:17:13,778 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:17:13,778 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:17:13,779 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:17:13,779 - api.main - INFO - Services initialized successfully
2025-08-20 18:17:13,779 - api.main - INFO - Starting task workers...
2025-08-20 18:17:13,780 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:17:13,780 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:17:13,781 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:17:23,951 - watchfiles.main - INFO - 1 change detected
2025-08-20 18:17:24,090 - api.main - INFO - Shutting down services...
2025-08-20 18:17:24,090 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:17:24,091 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:17:24,091 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:17:24,091 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:17:24,091 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:17:24,092 - services.task_service - INFO - Task workers stopped
2025-08-20 18:17:24,092 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:17:24,092 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:17:24,093 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:24,093 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:17:24,093 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:24,093 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:17:24,093 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:24,093 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:17:24,093 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:24,093 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:17:24,094 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:17:24,094 - api.main - INFO - Services shutdown complete
2025-08-20 18:17:24,474 - watchfiles.main - INFO - 4 changes detected
2025-08-20 18:17:25,715 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:17:25,853 - api.main - INFO - Initializing database...
2025-08-20 18:17:25,856 - api.main - INFO - Initializing services...
2025-08-20 18:17:25,922 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:26,076 - watchfiles.main - INFO - 3 changes detected
2025-08-20 18:17:26,104 - services.chat_service - INFO - ChatService initialized successfully
2025-08-20 18:17:26,105 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-20 18:17:26,105 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-20 18:17:26,105 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-20 18:17:26,108 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:26,423 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-20 18:17:26,428 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-20 18:17:26,428 - services.document_service - INFO - DocumentService initialized successfully
2025-08-20 18:17:26,434 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:26,466 - services.query_service - INFO - QueryService initialized successfully
2025-08-20 18:17:26,468 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-20 18:17:26,469 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-20 18:17:26,469 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-20 18:17:26,469 - services.task_service - INFO - TaskService initialized successfully
2025-08-20 18:17:26,469 - api.main - INFO - Initializing enhanced chat service...
2025-08-20 18:17:26,469 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-20 18:17:26,469 - api.main - INFO - Services initialized successfully
2025-08-20 18:17:26,469 - api.main - INFO - Starting task workers...
2025-08-20 18:17:26,469 - services.task_service - INFO - Starting 2 task workers
2025-08-20 18:17:26,470 - services.task_service - INFO - Task worker worker-0 started
2025-08-20 18:17:26,470 - services.task_service - INFO - Task worker worker-1 started
2025-08-20 18:17:26,674 - api.main - INFO - Shutting down services...
2025-08-20 18:17:26,675 - services.task_service - INFO - Stopping task workers...
2025-08-20 18:17:26,675 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-20 18:17:26,676 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-20 18:17:26,676 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-20 18:17:26,676 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-20 18:17:26,677 - services.task_service - INFO - Task workers stopped
2025-08-20 18:17:26,677 - services.task_service - INFO - TaskService resources closed
2025-08-20 18:17:26,677 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-20 18:17:26,678 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:26,678 - services.chat_service - INFO - ChatService resources closed
2025-08-20 18:17:26,678 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:26,679 - services.document_service - INFO - DocumentService resources closed
2025-08-20 18:17:26,679 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:26,680 - services.query_service - INFO - QueryService resources closed
2025-08-20 18:17:26,680 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-20 18:17:26,680 - services.collection_service - INFO - CollectionService resources closed
2025-08-20 18:17:26,680 - services.settings_service - INFO - SettingsService resources closed
2025-08-20 18:17:26,681 - api.main - INFO - Services shutdown complete
2025-08-21 21:39:01,542 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-21 21:39:01,542 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-21 21:39:01,542 - __main__ - INFO - Workers: 1, Log level: info
2025-08-21 21:39:05,177 - api.main - INFO - Initializing database...
2025-08-21 21:39:05,181 - api.main - INFO - Initializing services...
2025-08-21 21:39:05,276 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:39:05,603 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:39:05,691 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:39:05,847 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:39:05,848 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:39:05,848 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:39:05,848 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:39:05,850 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:39:06,191 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:39:06,195 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:39:06,195 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:39:06,201 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:39:06,227 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:39:06,230 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:39:06,230 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:39:06,230 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:39:06,230 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:39:06,230 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:39:06,231 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:39:06,231 - api.main - INFO - Services initialized successfully
2025-08-21 21:39:06,231 - api.main - INFO - Starting task workers...
2025-08-21 21:39:06,231 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:39:06,231 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:39:06,231 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:46:27,110 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-21 21:46:27,110 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-21 21:46:27,110 - __main__ - INFO - Workers: 1, Log level: info
2025-08-21 21:46:28,939 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:46:29,247 - api.main - INFO - Initializing database...
2025-08-21 21:46:29,300 - api.main - INFO - Initializing services...
2025-08-21 21:46:29,354 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:46:29,524 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:46:29,718 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:46:29,778 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:46:29,778 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:46:29,778 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:46:29,778 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:46:29,781 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:46:30,163 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:46:30,165 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:46:30,165 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:46:30,169 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:46:30,196 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:46:30,198 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:46:30,199 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:46:30,199 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:46:30,199 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:46:30,199 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:46:30,199 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:46:30,199 - api.main - INFO - Services initialized successfully
2025-08-21 21:46:30,200 - api.main - INFO - Starting task workers...
2025-08-21 21:46:30,200 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:46:30,200 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:46:30,201 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:46:37,604 - api.middleware - INFO - GET /docs
2025-08-21 21:46:37,854 - api.middleware - INFO - GET /openapi.json
2025-08-21 21:46:48,289 - api.middleware - INFO - GET /api/v1/collections
2025-08-21 21:46:53,097 - api.middleware - INFO - GET /api/v1/collections
2025-08-21 21:46:57,075 - api.middleware - INFO - GET /api/v1/collections
2025-08-21 21:47:02,335 - api.middleware - INFO - GET /api/v1/collections
2025-08-21 21:47:06,592 - api.middleware - INFO - GET /api/v1/collections
2025-08-21 21:47:34,310 - api.middleware - INFO - PATCH /api/v1/collections/strding
2025-08-21 21:47:34,322 - services.collection_service - INFO - Updated collection 'strding'
2025-08-21 21:47:39,767 - api.middleware - INFO - PATCH /api/v1/collections/strding
2025-08-21 21:47:39,771 - services.collection_service - INFO - Updated collection 'strding'
2025-08-21 21:47:46,150 - api.middleware - INFO - GET /api/v1/collections
2025-08-21 21:48:19,716 - api.middleware - INFO - DELETE /api/v1/collections/strding
2025-08-21 21:48:19,731 - vector_store.chroma_client - INFO - Deleted collection 'strding'
2025-08-21 21:48:19,735 - services.collection_service - INFO - Deleted collection 'strding'
2025-08-21 21:48:19,842 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:49:34,521 - api.middleware - INFO - DELETE /api/v1/collections/strding
2025-08-21 21:53:19,294 - api.middleware - INFO - DELETE /api/v1/collections/strding
2025-08-21 21:53:27,302 - api.middleware - INFO - GET /api/v1/collections
2025-08-21 21:53:35,213 - api.middleware - INFO - DELETE /api/v1/collections/string
2025-08-21 21:53:35,220 - vector_store.chroma_client - INFO - Deleted collection 'string'
2025-08-21 21:53:35,223 - services.collection_service - INFO - Deleted collection 'string'
2025-08-21 21:53:35,297 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:54:19,592 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:54:19,771 - api.main - INFO - Shutting down services...
2025-08-21 21:54:19,771 - services.task_service - INFO - Stopping task workers...
2025-08-21 21:54:19,772 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-21 21:54:19,772 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-21 21:54:19,772 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-21 21:54:19,772 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-21 21:54:19,772 - services.task_service - INFO - Task workers stopped
2025-08-21 21:54:19,773 - services.task_service - INFO - TaskService resources closed
2025-08-21 21:54:19,773 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-21 21:54:19,773 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:19,773 - services.chat_service - INFO - ChatService resources closed
2025-08-21 21:54:19,774 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:19,774 - services.document_service - INFO - DocumentService resources closed
2025-08-21 21:54:19,774 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:19,775 - services.query_service - INFO - QueryService resources closed
2025-08-21 21:54:19,775 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:19,775 - services.collection_service - INFO - CollectionService resources closed
2025-08-21 21:54:19,775 - services.settings_service - INFO - SettingsService resources closed
2025-08-21 21:54:19,775 - api.main - INFO - Services shutdown complete
2025-08-21 21:54:20,154 - watchfiles.main - INFO - 4 changes detected
2025-08-21 21:54:20,513 - watchfiles.main - INFO - 4 changes detected
2025-08-21 21:54:21,737 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:54:21,852 - api.main - INFO - Initializing database...
2025-08-21 21:54:21,856 - api.main - INFO - Initializing services...
2025-08-21 21:54:21,924 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:22,125 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:54:22,125 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:54:22,125 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:54:22,125 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:54:22,128 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:22,550 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:54:22,553 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:54:22,553 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:54:22,558 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:22,595 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:54:22,598 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:22,598 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:54:22,598 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:54:22,598 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:54:22,598 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:54:22,598 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:54:22,598 - api.main - INFO - Services initialized successfully
2025-08-21 21:54:22,599 - api.main - INFO - Starting task workers...
2025-08-21 21:54:22,599 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:54:22,599 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:54:22,599 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:54:22,968 - watchfiles.main - INFO - 5 changes detected
2025-08-21 21:54:23,327 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:54:24,315 - api.main - INFO - Initializing database...
2025-08-21 21:54:24,317 - api.main - INFO - Initializing services...
2025-08-21 21:54:24,377 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:24,453 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:54:24,543 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:54:24,543 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:54:24,544 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:54:24,544 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:54:24,546 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:24,863 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:54:24,867 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:54:24,868 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:54:24,873 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:24,906 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:54:24,909 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:24,909 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:54:24,909 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:54:24,909 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:54:24,909 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:54:24,909 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:54:24,909 - api.main - INFO - Services initialized successfully
2025-08-21 21:54:24,909 - api.main - INFO - Starting task workers...
2025-08-21 21:54:24,909 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:54:24,910 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:54:24,910 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:54:26,731 - api.main - INFO - Shutting down services...
2025-08-21 21:54:26,731 - services.task_service - INFO - Stopping task workers...
2025-08-21 21:54:26,732 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-21 21:54:26,733 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-21 21:54:26,733 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-21 21:54:26,733 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-21 21:54:26,734 - services.task_service - INFO - Task workers stopped
2025-08-21 21:54:26,734 - services.task_service - INFO - TaskService resources closed
2025-08-21 21:54:26,734 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-21 21:54:26,735 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:26,735 - services.chat_service - INFO - ChatService resources closed
2025-08-21 21:54:26,735 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:26,736 - services.document_service - INFO - DocumentService resources closed
2025-08-21 21:54:26,736 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:26,736 - services.query_service - INFO - QueryService resources closed
2025-08-21 21:54:26,736 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:54:26,737 - services.collection_service - INFO - CollectionService resources closed
2025-08-21 21:54:26,737 - services.settings_service - INFO - SettingsService resources closed
2025-08-21 21:54:26,737 - api.main - INFO - Services shutdown complete
2025-08-21 21:54:38,201 - __main__ - INFO - Starting AI Document Assistant API server
2025-08-21 21:54:38,201 - __main__ - INFO - Host: 127.0.0.1, Port: 8888
2025-08-21 21:54:38,201 - __main__ - INFO - Workers: 1, Log level: info
2025-08-21 21:54:40,069 - api.main - INFO - Initializing database...
2025-08-21 21:54:40,072 - api.main - INFO - Initializing services...
2025-08-21 21:54:40,178 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:40,235 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:54:40,366 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:54:40,366 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:54:40,366 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:54:40,366 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:54:40,369 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:40,728 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:54:40,731 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:54:40,731 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:54:40,735 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:40,774 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:54:40,777 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:54:40,778 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:54:40,778 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:54:40,778 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:54:40,778 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:54:40,778 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:54:40,778 - api.main - INFO - Services initialized successfully
2025-08-21 21:54:40,778 - api.main - INFO - Starting task workers...
2025-08-21 21:54:40,778 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:54:40,778 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:54:40,779 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:54:44,996 - api.middleware - INFO - DELETE /api/v1/collections/string
2025-08-21 21:55:09,791 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:55:09,985 - api.main - INFO - Shutting down services...
2025-08-21 21:55:09,985 - services.task_service - INFO - Stopping task workers...
2025-08-21 21:55:09,985 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-21 21:55:09,985 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-21 21:55:09,985 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-21 21:55:09,986 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-21 21:55:09,986 - services.task_service - INFO - Task workers stopped
2025-08-21 21:55:09,986 - services.task_service - INFO - TaskService resources closed
2025-08-21 21:55:09,986 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-21 21:55:09,986 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:09,986 - services.chat_service - INFO - ChatService resources closed
2025-08-21 21:55:09,987 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:09,987 - services.document_service - INFO - DocumentService resources closed
2025-08-21 21:55:09,987 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:09,987 - services.query_service - INFO - QueryService resources closed
2025-08-21 21:55:09,987 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:09,987 - services.collection_service - INFO - CollectionService resources closed
2025-08-21 21:55:09,988 - services.settings_service - INFO - SettingsService resources closed
2025-08-21 21:55:09,988 - api.main - INFO - Services shutdown complete
2025-08-21 21:55:10,412 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:11,909 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:12,070 - api.main - INFO - Initializing database...
2025-08-21 21:55:12,075 - api.main - INFO - Initializing services...
2025-08-21 21:55:12,166 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:12,273 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:55:12,375 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:55:12,375 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:55:12,375 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:55:12,376 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:55:12,378 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:12,720 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:55:12,724 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:55:12,724 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:55:12,731 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:12,759 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:55:12,761 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:12,761 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:55:12,761 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:55:12,762 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:55:12,762 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:55:12,762 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:55:12,762 - api.main - INFO - Services initialized successfully
2025-08-21 21:55:12,762 - api.main - INFO - Starting task workers...
2025-08-21 21:55:12,762 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:55:12,763 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:55:12,763 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:55:14,356 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:55:14,482 - api.main - INFO - Shutting down services...
2025-08-21 21:55:14,483 - services.task_service - INFO - Stopping task workers...
2025-08-21 21:55:14,483 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-21 21:55:14,484 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-21 21:55:14,484 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-21 21:55:14,484 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-21 21:55:14,484 - services.task_service - INFO - Task workers stopped
2025-08-21 21:55:14,484 - services.task_service - INFO - TaskService resources closed
2025-08-21 21:55:14,484 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-21 21:55:14,485 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:14,485 - services.chat_service - INFO - ChatService resources closed
2025-08-21 21:55:14,485 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:14,485 - services.document_service - INFO - DocumentService resources closed
2025-08-21 21:55:14,485 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:14,485 - services.query_service - INFO - QueryService resources closed
2025-08-21 21:55:14,485 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:14,486 - services.collection_service - INFO - CollectionService resources closed
2025-08-21 21:55:14,486 - services.settings_service - INFO - SettingsService resources closed
2025-08-21 21:55:14,486 - api.main - INFO - Services shutdown complete
2025-08-21 21:55:14,862 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:16,146 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:16,252 - api.main - INFO - Initializing database...
2025-08-21 21:55:16,254 - api.main - INFO - Initializing services...
2025-08-21 21:55:16,315 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:16,480 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:55:16,481 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:55:16,481 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:55:16,481 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:55:16,484 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:16,502 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:55:16,829 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:55:16,833 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:55:16,833 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:55:16,837 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:16,866 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:55:16,869 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:16,869 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:55:16,869 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:55:16,869 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:55:16,869 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:55:16,869 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:55:16,870 - api.main - INFO - Services initialized successfully
2025-08-21 21:55:16,870 - api.main - INFO - Starting task workers...
2025-08-21 21:55:16,870 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:55:16,870 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:55:16,870 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:55:16,968 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:55:17,074 - api.main - INFO - Shutting down services...
2025-08-21 21:55:17,074 - services.task_service - INFO - Stopping task workers...
2025-08-21 21:55:17,074 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-21 21:55:17,075 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-21 21:55:17,075 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-21 21:55:17,075 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-21 21:55:17,075 - services.task_service - INFO - Task workers stopped
2025-08-21 21:55:17,075 - services.task_service - INFO - TaskService resources closed
2025-08-21 21:55:17,075 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-21 21:55:17,076 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:17,076 - services.chat_service - INFO - ChatService resources closed
2025-08-21 21:55:17,076 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:17,076 - services.document_service - INFO - DocumentService resources closed
2025-08-21 21:55:17,076 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:17,076 - services.query_service - INFO - QueryService resources closed
2025-08-21 21:55:17,076 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:17,076 - services.collection_service - INFO - CollectionService resources closed
2025-08-21 21:55:17,076 - services.settings_service - INFO - SettingsService resources closed
2025-08-21 21:55:17,076 - api.main - INFO - Services shutdown complete
2025-08-21 21:55:17,451 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:18,667 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:18,751 - api.main - INFO - Initializing database...
2025-08-21 21:55:18,753 - api.main - INFO - Initializing services...
2025-08-21 21:55:18,813 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:18,976 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:55:18,977 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:55:18,977 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:55:18,977 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:55:18,980 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:19,030 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:55:19,409 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:55:19,415 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:55:19,415 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:55:19,424 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:19,463 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:55:19,467 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:19,467 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:55:19,467 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:55:19,467 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:55:19,467 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:55:19,467 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:55:19,467 - api.main - INFO - Services initialized successfully
2025-08-21 21:55:19,467 - api.main - INFO - Starting task workers...
2025-08-21 21:55:19,467 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:55:19,468 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:55:19,468 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:55:31,026 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:55:31,186 - api.main - INFO - Shutting down services...
2025-08-21 21:55:31,186 - services.task_service - INFO - Stopping task workers...
2025-08-21 21:55:31,186 - services.task_service - INFO - Worker worker-0 cancelled
2025-08-21 21:55:31,187 - services.task_service - INFO - Task worker worker-0 stopped
2025-08-21 21:55:31,187 - services.task_service - INFO - Worker worker-1 cancelled
2025-08-21 21:55:31,187 - services.task_service - INFO - Task worker worker-1 stopped
2025-08-21 21:55:31,187 - services.task_service - INFO - Task workers stopped
2025-08-21 21:55:31,187 - services.task_service - INFO - TaskService resources closed
2025-08-21 21:55:31,187 - services.enhanced_chat_service - INFO - Enhanced chat service resources closed
2025-08-21 21:55:31,188 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:31,188 - services.chat_service - INFO - ChatService resources closed
2025-08-21 21:55:31,190 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:31,192 - services.document_service - INFO - DocumentService resources closed
2025-08-21 21:55:31,193 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:31,196 - services.query_service - INFO - QueryService resources closed
2025-08-21 21:55:31,196 - vector_store.chroma_client - INFO - ChromaDB connection closed
2025-08-21 21:55:31,196 - services.collection_service - INFO - CollectionService resources closed
2025-08-21 21:55:31,197 - services.settings_service - INFO - SettingsService resources closed
2025-08-21 21:55:31,198 - api.main - INFO - Services shutdown complete
2025-08-21 21:55:31,632 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:31,997 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:32,363 - watchfiles.main - INFO - 1 change detected
2025-08-21 21:55:33,129 - api.main - INFO - Initializing database...
2025-08-21 21:55:33,132 - api.main - INFO - Initializing services...
2025-08-21 21:55:33,199 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:33,392 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:55:33,392 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:55:33,392 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:55:33,392 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:55:33,395 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:33,772 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:55:33,779 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:55:33,779 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:55:33,788 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:33,826 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:55:33,829 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:33,829 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:55:33,830 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:55:33,830 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:55:33,830 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:55:33,830 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:55:33,830 - api.main - INFO - Services initialized successfully
2025-08-21 21:55:33,830 - api.main - INFO - Starting task workers...
2025-08-21 21:55:33,830 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:55:33,831 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:55:33,831 - services.task_service - INFO - Task worker worker-1 started
2025-08-21 21:55:34,208 - watchfiles.main - INFO - 5 changes detected
2025-08-21 21:55:34,569 - watchfiles.main - INFO - 3 changes detected
2025-08-21 21:55:35,606 - api.main - INFO - Initializing database...
2025-08-21 21:55:35,609 - api.main - INFO - Initializing services...
2025-08-21 21:55:35,669 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:35,742 - watchfiles.main - INFO - 2 changes detected
2025-08-21 21:55:35,842 - services.chat_service - INFO - ChatService initialized successfully
2025-08-21 21:55:35,842 - data_processing.file_processor - INFO - Initialized FileProcessor with max_file_size=50.0MB
2025-08-21 21:55:35,842 - data_processing.text_splitter - INFO - Initialized DocumentProcessor with chunk_size=1000, overlap=200
2025-08-21 21:55:35,842 - crawler.simple_web_crawler - INFO - Initialized SimpleWebCrawler with max_depth=3, delay=1.0s, max_pages=50
2025-08-21 21:55:35,845 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:36,193 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/embeddings "HTTP/1.1 200 OK"
2025-08-21 21:55:36,197 - services.document_service - INFO - Detected embedding dimension: 1024
2025-08-21 21:55:36,197 - services.document_service - INFO - DocumentService initialized successfully
2025-08-21 21:55:36,202 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:36,239 - services.query_service - INFO - QueryService initialized successfully
2025-08-21 21:55:36,242 - vector_store.chroma_client - INFO - Connected to ChromaDB at ./chroma_db
2025-08-21 21:55:36,242 - services.collection_service - INFO - CollectionService initialized successfully
2025-08-21 21:55:36,242 - services.settings_service - INFO - SettingsService initialized successfully
2025-08-21 21:55:36,242 - services.task_service - INFO - TaskService initialized successfully
2025-08-21 21:55:36,242 - api.main - INFO - Initializing enhanced chat service...
2025-08-21 21:55:36,242 - services.enhanced_chat_service - INFO - Enhanced chat service initialized - Intent: True, Cache: True, Summary: True
2025-08-21 21:55:36,242 - api.main - INFO - Services initialized successfully
2025-08-21 21:55:36,243 - api.main - INFO - Starting task workers...
2025-08-21 21:55:36,243 - services.task_service - INFO - Starting 2 task workers
2025-08-21 21:55:36,243 - services.task_service - INFO - Task worker worker-0 started
2025-08-21 21:55:36,243 - services.task_service - INFO - Task worker worker-1 started
